!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.io=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){b.exports=a("./socket"),/**
 * Exports parser
 *
 * @api public
 *
 */
b.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,b,c){(function(c){/**
 * Socket constructor.
 *
 * @param {String|Object} uri or options
 * @param {Object} options
 * @api public
 */
function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate?b.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized;
// other options for Node.js client
var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}/**
 * Module dependencies.
 */
var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");/**
 * Module exports.
 */
b.exports=d,d.priorWebsocketSuccess=!1,/**
 * Mix in `Emitter`.
 */
g(d.prototype),/**
 * Protocol version.
 *
 * @api public
 */
d.protocol=j.protocol,// this is an int
/**
 * Expose deps for legacy compatibility
 * and standalone browser access.
 */
d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),/**
 * Creates transport of the given type.
 *
 * @param {String} transport name
 * @return {Transport}
 * @api private
 */
d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);
// append engine.io protocol identifier
b.EIO=j.protocol,
// transport name
b.transport=a,
// session id if we already have one
this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return c},/**
 * Initializes transport to use and starts probe.
 *
 * @api private
 */
d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){
// Emit error on next tick so it can be listened to
var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";
// Retry with the next transport if the transport is disabled (jsonp: false)
try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},/**
 * Sets the current transport. Disables the existing one (if any).
 *
 * @api private
 */
d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),
// set up transport
this.transport=a,
// set up transport listeners
a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},/**
 * Probes a transport.
 *
 * @param {String} transport name
 * @api private
 */
d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}
//Handle any error that happens while probing
function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}
//When the socket is closed while we're probing
function g(){e("socket closed")}
//When the socket is upgraded while we're probing
function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}
//Remove all listeners on the transport and on self
function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},/**
 * Called when connection is deemed open.
 *
 * @api public
 */
d.prototype.onOpen=function(){
// we check for `readyState` in case an `open`
// listener already closed the socket
if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},/**
 * Handles a packet.
 *
 * @api private
 */
d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),
// Socket is live - any packet counts
this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=new Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},/**
 * Called upon handshake completion.
 *
 * @param {Object} handshake obj
 * @api private
 */
d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),
// In case open handler closes socket
"closed"!=this.readyState&&(this.setPing(),
// Prolong liveness of socket on heartbeat
this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},/**
 * Resets ping timeout.
 *
 * @api private
 */
d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},/**
 * Pings server every `this.pingInterval` and expects response
 * within `this.pingTimeout` or closes connection.
 *
 * @api private
 */
d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},/**
* Sends a ping packet.
*
* @api private
*/
d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},/**
 * Called on `drain` event
 *
 * @api private
 */
d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),
// setting prevBufferLen = 0 is very important
// for example, when upgrading, upgrade packet is sent over,
// and a nonzero prevBufferLen could cause problems on `drain`
this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},/**
 * Flush write buffers.
 *
 * @api private
 */
d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),
// keep track of current length of writeBuffer
// splice writeBuffer and callbackBuffer on `drain`
this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},/**
 * Sends a message.
 *
 * @param {String} message.
 * @param {Function} callback function.
 * @param {Object} options.
 * @return {Socket} for chaining.
 * @api public
 */
d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},/**
 * Sends a packet.
 *
 * @param {String} packet type.
 * @param {String} data.
 * @param {Object} options.
 * @param {Function} callback function.
 * @api private
 */
d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!=this.readyState&&"closed"!=this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},/**
 * Closes the connection.
 *
 * @api private
 */
d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){
// wait for upgrade to finish since we can't send packets while pausing a transport
d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},/**
 * Called upon transport error
 *
 * @api private
 */
d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},/**
 * Called upon transport close.
 *
 * @api private
 */
d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;
// clear timers
clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),
// stop event from firing again for transport
this.transport.removeAllListeners("close"),
// ensure transport won't stay open
this.transport.close(),
// ignore further transport communication
this.transport.removeAllListeners(),
// set ready state
this.readyState="closed",
// clear session id
this.id=null,
// emit close event
this.emit("close",a,b),
// clean buffers after, so users can still
// grab the buffers on `close` event
c.writeBuffer=[],c.prevBufferLen=0}},/**
 * Filters upgrades, returning only those matching client transports.
 *
 * @param {Array} server upgrades
 * @api private
 *
 */
d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;d>c;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,b,c){/**
 * Transport abstract constructor.
 *
 * @param {Object} options.
 * @api private
 */
function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,
// SSL options for Node.js client
this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,
// other options for Node.js client
this.extraHeaders=a.extraHeaders}/**
 * Module dependencies.
 */
var e=a("engine.io-parser"),f=a("component-emitter");/**
 * Module exports.
 */
b.exports=d,/**
 * Mix in `Emitter`.
 */
f(d.prototype),/**
 * Emits an error.
 *
 * @param {String} str
 * @return {Transport} for chaining
 * @api public
 */
d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},/**
 * Opens the transport.
 *
 * @api public
 */
d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},/**
 * Closes the transport.
 *
 * @api private
 */
d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},/**
 * Sends multiple packets.
 *
 * @param {Array} packets
 * @api private
 */
d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},/**
 * Called upon open
 *
 * @api private
 */
d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},/**
 * Called with data.
 *
 * @param {String} data
 * @api private
 */
d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},/**
 * Called with a decoded packet.
 */
d.prototype.onPacket=function(a){this.emit("packet",a)},/**
 * Called upon close.
 *
 * @api private
 */
d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,b,c){(function(b){/**
 * Polling transport polymorphic constructor.
 * Decides on xhr vs jsonp based on feature detection.
 *
 * @api private
 */
function d(a){var c,d=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;
// some user agents have empty `location.port`
k||(k=j?443:80),d=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=d,a.xscheme=h,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!i)throw new Error("JSONP disabled");return new g(a)}/**
 * Module dependencies
 */
var e=a("xmlhttprequest-ssl"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");/**
 * Export transports.
 */
c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,b,c){(function(c){/**
 * Noop.
 */
function d(){}/**
 * JSONP Polling constructor.
 *
 * @param {Object} opts.
 * @api public
 */
function e(a){f.call(this,a),this.query=this.query||{},
// define global callbacks array if not present
// we do this here (lazily) to avoid unneeded global pollution
h||(
// we need to consider multiple engines in the same page
c.___eio||(c.___eio=[]),h=c.___eio),
// callback identifier
this.index=h.length;
// add callback to jsonp global
var b=this;h.push(function(a){b.onData(a)}),
// append to query string
this.query.j=this.index,
// prevent spurious errors from being emitted when the window is unloaded
c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}/**
 * Module requirements.
 */
var f=a("./polling"),g=a("component-inherit");/**
 * Module exports.
 */
b.exports=e;/**
 * Cached regular expressions.
 */
var h,i=/\n/g,j=/\\n/g;/**
 * Inherits from Polling.
 */
g(e,f),/*
 * JSONP only supports binary as base64 encoded strings
 */
e.prototype.supportsBinary=!1,/**
 * Closes the socket.
 *
 * @api private
 */
e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},/**
 * Starts a poll cycle.
 *
 * @api private
 */
e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},/**
 * Writes with a hidden iframe.
 *
 * @param {String} data to send
 * @param {Function} called upon flush.
 * @api private
 */
e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{
// ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,b,c){(function(c){/**
 * Empty function
 */
function d(){}/**
 * XHR Polling constructor.
 *
 * @param {Object} opts
 * @api public
 */
function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;
// some user agents have empty `location.port`
d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}/**
 * Request constructor
 *
 * @param {Object} options
 * @api public
 */
function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,
// SSL options for Node.js client
this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,
// other options for Node.js client
this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}/**
 * Module requirements.
 */
var h=a("xmlhttprequest-ssl"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");/**
 * Module exports.
 */
b.exports=e,b.exports.Request=f,/**
 * Inherits from Polling.
 */
k(e,i),/**
 * XHR supports binary
 */
e.prototype.supportsBinary=!0,/**
 * Creates a request.
 *
 * @param {String} method
 * @api private
 */
e.prototype.request=function(a){
// SSL options for Node.js client
// other options for Node.js client
return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.extraHeaders=this.extraHeaders,new f(a)},/**
 * Sends data.
 *
 * @param {String} data to send.
 * @param {Function} called upon flush.
 * @api private
 */
e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},/**
 * Starts a poll cycle.
 *
 * @api private
 */
e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},/**
 * Mix in `Emitter`.
 */
j(f.prototype),/**
 * Creates the XHR object and sends the request.
 *
 * @api private
 */
f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};
// SSL options for Node.js client
a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var e in this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&b.setRequestHeader(e,this.extraHeaders[e])}}catch(g){}if(this.supportsBinary&&(
// This has to be done after open because Firefox is stupid
// http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension
b.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in b&&(b.withCredentials=!0),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4==b.readyState&&(200==b.status||1223==b.status?d.onLoad():
// make sure the `error` event handler that's user-set
// does not throw in the same tick and gets caught here
setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(g){
// Need to defer since .create() is called directly fhrom the constructor
// and thus the 'error' event can only be only bound *after* this exception
// occurs.  Therefore, also, we cannot throw here at all.
return void setTimeout(function(){d.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},/**
 * Called upon successful response.
 *
 * @api private
 */
f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},/**
 * Called if we have data.
 *
 * @api private
 */
f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},/**
 * Called upon error.
 *
 * @api private
 */
f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},/**
 * Cleans up house.
 *
 * @api private
 */
f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(
// xmlhttprequest
this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},/**
 * Called upon load.
 *
 * @api private
 */
f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(c){for(var d=new Uint8Array(this.xhr.response),e=[],f=0,g=d.length;g>f;f++)e.push(d[f]);a=String.fromCharCode.apply(null,e)}else a=this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},/**
 * Check if it has XDomainRequest.
 *
 * @api private
 */
f.prototype.hasXDR=function(){return"undefined"!=typeof c.XDomainRequest&&!this.xs&&this.enablesXDR},/**
 * Aborts the request.
 *
 * @api public
 */
f.prototype.abort=function(){this.cleanup()},/**
 * Aborts pending requests when unloading the window. This is needed to prevent
 * memory leaks (e.g. when using IE) and to ensure that no spurious error is
 * emitted.
 */
c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,b,c){/**
 * Polling interface.
 *
 * @param {Object} opts
 * @api private
 */
function d(a){var b=a&&a.forceBase64;k&&!b||(this.supportsBinary=!1),e.call(this,a)}/**
 * Module dependencies.
 */
var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:polling");/**
 * Module exports.
 */
b.exports=d;/**
 * Is XHR2 supported?
 */
var k=function(){var b=a("xmlhttprequest-ssl"),c=new b({xdomain:!1});return null!=c.responseType}();/**
 * Inherits from Transport.
 */
h(d,e),/**
 * Transport name.
 */
d.prototype.name="polling",/**
 * Opens the socket (triggers polling). We write a PING message to determine
 * when the transport is open.
 *
 * @api private
 */
d.prototype.doOpen=function(){this.poll()},/**
 * Pauses polling.
 *
 * @param {Function} callback upon buffers are flushed and transport is paused
 * @api private
 */
d.prototype.pause=function(a){function b(){j("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(j("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){j("pre-pause polling complete"),--d||b()})),this.writable||(j("we are currently writing - waiting to pause"),d++,this.once("drain",function(){j("pre-pause writing complete"),--d||b()}))}else b()},/**
 * Starts polling cycle.
 *
 * @api public
 */
d.prototype.poll=function(){j("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},/**
 * Overloads onData to detect payloads.
 *
 * @api private
 */
d.prototype.onData=function(a){var b=this;j("polling got data %s",a);var c=function(a,c,d){
// if its a close packet, we close the ongoing requests
// if its the first message we consider the transport open
// if its a close packet, we close the ongoing requests
// otherwise bypass onData and handle the message
return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};
// decode payload
g.decodePayload(a,this.socket.binaryType,c),
// if an event did not trigger closing
"closed"!=this.readyState&&(
// if we got data we're not polling
this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():j('ignoring poll - transport state "%s"',this.readyState))},/**
 * For polling, send a close packet.
 *
 * @api private
 */
d.prototype.doClose=function(){function a(){j("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(j("transport open - closing"),a()):(
// in case we're trying to close while
// handshaking is in progress (GH-164)
j("transport not open - deferring close"),this.once("open",a))},/**
 * Writes a packets payload.
 *
 * @param {Array} data packets
 * @param {Function} drain callback
 * @api private
 */
d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},/**
 * Generates uri for connection.
 *
 * @api private
 */
d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";
// cache busting is forced
!1!==this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a);var d=-1!==this.hostname.indexOf(":");return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,b,c){(function(c){/**
 * WebSocket transport constructor.
 *
 * @api {Object} connection options
 * @api public
 */
function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,e.call(this,a)}/**
 * Module dependencies.
 */
var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:websocket"),k=c.WebSocket||c.MozWebSocket,l=k;if(!l&&"undefined"==typeof window)try{l=a("ws")}catch(m){}/**
 * Module exports.
 */
b.exports=d,/**
 * Inherits from Transport.
 */
h(d,e),/**
 * Transport name.
 *
 * @api public
 */
d.prototype.name="websocket",/*
 * WebSockets support binary
 */
d.prototype.supportsBinary=!0,/**
 * Opens socket.
 *
 * @api private
 */
d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent,perMessageDeflate:this.perMessageDeflate};
// SSL options for Node.js client
c.pfx=this.pfx,c.key=this.key,c.passphrase=this.passphrase,c.cert=this.cert,c.ca=this.ca,c.ciphers=this.ciphers,c.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(c.headers=this.extraHeaders),this.ws=k?new l(a):new l(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},/**
 * Adds event listeners to the socket
 *
 * @api private
 */
d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},/**
 * Override `onData` to use a timer on iOS.
 * See: https://gist.github.com/mloughran/2052006
 *
 * @api private
 */
"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),/**
 * Writes data to socket.
 *
 * @param {Array} array of packets.
 * @api private
 */
d.prototype.write=function(a){function b(){d.emit("flush"),
// fake drain
// defer to next tick to allow Socket to clear writeBuffer
setTimeout(function(){d.writable=!0,d.emit("drain")},0)}var d=this;this.writable=!1;for(var e=a.length,g=0,h=e;h>g;g++)!function(a){f.encodePacket(a,d.supportsBinary,function(f){if(!k){
// always create a new object (GH-437)
var g={};if(a.options&&(g.compress=a.options.compress),d.perMessageDeflate){var h="string"==typeof f?c.Buffer.byteLength(f):f.length;h<d.perMessageDeflate.threshold&&(g.compress=!1)}}
//Sometimes the websocket has already been closed but the browser didn't
//have a chance of informing us about it yet, in that case send will
//throw an error
try{k?
// TypeError is thrown when passing the second argument on Safari
d.ws.send(f):d.ws.send(f,g)}catch(i){j("websocket closed before onclose event")}--e||b()})}(a[g])},/**
 * Called upon close
 *
 * @api private
 */
d.prototype.onClose=function(){e.prototype.onClose.call(this)},/**
 * Closes socket.
 *
 * @api private
 */
d.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},/**
 * Generates uri for connection.
 *
 * @api private
 */
d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";
// avoid port if default for schema
this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),
// append timestamp to URI
this.timestampRequests&&(a[this.timestampParam]=i()),
// communicate binary support capabilities
this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a);var d=-1!==this.hostname.indexOf(":");return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a},/**
 * Feature detection for WebSocket.
 *
 * @return {Boolean} whether this transport is available.
 * @api public
 */
d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,b,c){
// browser shim for xmlhttprequest module
var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;
// XMLHttpRequest can be disabled on IE
try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}
// Use XDomainRequest for IE8 if enablesXDR is true
// because loading bar keeps flashing when using jsonp-polling
// https://github.com/yujiosaka/socke.io-ie8-loading-example
try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":22}],11:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,
// after first error, rest are passed to err_cb
a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],12:[function(a,b,c){/**
 * An abstraction for slicing an arraybuffer even when
 * ArrayBuffer.prototype.slice is not supported
 *
 * @api public
 */
b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(0>b&&(b+=d),0>c&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;c>g;g++,h++)f[h]=e[g];return f.buffer}},{}],13:[function(a,b,c){/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;i>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,b,c){(function(a){/**
 * Helper function that maps ArrayBufferViews to ArrayBuffers
 * Used by BlobBuilder constructor and old browsers that didn't
 * support it in the Blob constructor.
 */
function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;
// if this is a subarray, make a copy so we only
// include the subarray region from the underlying buffer
if(c.byteLength!==d.byteLength){var e=new Uint8Array(c.byteLength);e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer}a[b]=d}}}function d(a,b){b=b||{};var d=new f;c(a);for(var e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}/**
 * Create a blob builder even when vendor prefixes exist
 */
var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(a,b,c){/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */
function d(a){return a?e(a):void 0}/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */
function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}/**
 * Expose `Emitter`.
 */
b.exports=d,/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){
// all
if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;
// specific event
var c=this._callbacks[a];if(!c)return this;
// remove all handlers
if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */
d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */
d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */
d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],17:[function(a,b,c){/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */
function d(){
// is webkit? http://stackoverflow.com/a/16459606/376773
// is firebug? http://stackoverflow.com/a/398120/376773
// is firefox >= v31?
// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */
function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));
// the final "%c" is somewhat tricky, because there could be other
// arguments passed either before or after the %c, so we need to
// figure out the correct index to insert the CSS into
var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(
// we only are interested in the *last* %c
// (the user may have provided their own)
f=e))}),a.splice(f,0,d),a}/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */
function f(){
// this hackery is required for IE8/9, where
// the `console.log` function doesn't have 'apply'
return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function h(){var a;try{a=c.storage.debug}catch(b){}return a}/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */
function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":18}],18:[function(a,b,c){/**
 * Select a color.
 *
 * @return {Number}
 * @api private
 */
function d(){return c.colors[k++%c.colors.length]}/**
 * Create a debugger with the given `namespace`.
 *
 * @param {String} namespace
 * @return {Function}
 * @api public
 */
function e(a){
// define the `disabled` version
function b(){}
// define the `enabled` version
function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(
// anything else let's inspect with %o
g=["%o"].concat(g));
// apply any `formatters` transformations
var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){
// if we encounter an escaped % then don't increase the array index
if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),
// now we need to remove `args[index]` since it's inlined in the `format`
g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}/**
 * Enables a debug mode by namespaces. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} namespaces
 * @api public
 */
function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}/**
 * Disable debug output.
 *
 * @api public
 */
function g(){c.enable("")}/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */
function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}/**
 * Coerce `val`.
 *
 * @param {Mixed} val
 * @return {Mixed}
 * @api private
 */
function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};/**
 * Previously assigned color.
 */
var j,k=0},{ms:25}],19:[function(a,b,c){(function(b){function d(a,b){
// packet data is an object { base64: true, data: dataAsBase64String }
var d="b"+c.packets[a.type]+a.data.data;return b(d)}/**
 * Encode packet helpers for binary types
 */
function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=r[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(q)return f(a,b,d);var e=new Uint8Array(1);e[0]=r[a.type];var g=new u([e.buffer,a.data]);return d(g)}/**
 * Async array map using after
 */
function h(a,b,c){for(var d=new Array(a.length),e=m(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}/**
 * Module dependencies.
 */
var i=a("./keys"),j=a("has-binary"),k=a("arraybuffer.slice"),l=a("base64-arraybuffer"),m=a("after"),n=a("utf8"),o=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),q=o||p;/**
 * Current protocol version.
 */
c.protocol=3;/**
 * Packet types.
 */
var r=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=i(r),t={type:"error",data:"parser error"},u=a("blob");/**
 * Encodes a packet.
 *
 *     <packet type id> [ <data> ]
 *
 * Example:
 *
 *     5hello world
 *     3
 *     4
 *
 * Binary is encoded in an identical principle
 *
 * @api private
 */
c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(u&&i instanceof b.Blob)return g(a,c,h);
// might be an object with { base64: true, data: dataAsBase64String }
if(i&&i.base64)return d(a,h);
// Sending data as a utf-8 string
var j=r[a.type];
// data fragment is optional
return void 0!==a.data&&(j+=f?n.encode(String(a.data)):String(a.data)),h(""+j)},/**
 * Encodes a packet with binary data in a base64 string
 *
 * @param {Object} packet, has `type` and `data`
 * @return {String} base64 encoded message
 */
c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(u&&a.data instanceof b.Blob){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},/**
 * Decodes a packet. Changes format to Blob if requested.
 *
 * @return {Object} with `type` and `data` (if any)
 * @api private
 */
c.decodePacket=function(a,b,d){
// String data
if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=n.decode(a)}catch(e){return t}var f=a.charAt(0);return Number(f)==f&&s[f]?a.length>1?{type:s[f],data:a.substring(1)}:{type:s[f]}:t}var g=new Uint8Array(a),f=g[0],h=k(a,1);return u&&"blob"===b&&(h=new u([h])),{type:s[f],data:h}},/**
 * Decodes a packet encoded in a base64 string
 *
 * @param {String} base64 encoded message
 * @return {Object} with `type` and `data` (if any)
 */
c.decodeBase64Packet=function(a,c){var d=s[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=l.decode(a.substr(1));return"blob"===c&&u&&(e=new u([e])),{type:d,data:e}},/**
 * Encodes multiple messages (payload).
 *
 *     <length>:data
 *
 * Example:
 *
 *     11:hello world2:hi
 *
 * If any contents are binary, they will be encoded as base64 strings. Base64
 * encoded strings are marked with a b before the length specifier
 *
 * @param {Array} packets
 * @api private
 */
c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,g?b:!1,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=j(a);return b&&g?u&&!q?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},/*
 * Decodes data when a payload is maybe expected. Possible binary contents are
 * decoded from their base64 representation
 *
 * @param {String} data, callback method
 * @api public
 */
c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)
// parser error - ignoring payload
return d(t,0,1);for(var f,g,h="",i=0,j=a.length;j>i;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))
// parser error - ignoring payload
return d(t,0,1);if(g=a.substr(i+1,f),h!=g.length)
// parser error - ignoring payload
return d(t,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),t.type==e.type&&t.data==e.data)
// parser error in individual packet - ignoring payload
return d(t,0,1);var l=d(e,i+f,j);if(!1===l)return}
// advance cursor
i+=f,h=""}}return""!=h?d(t,0,1):void 0},/**
 * Encodes multiple messages (payload) as binary.
 *
 * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number
 * 255><data>
 *
 * Example:
 * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers
 *
 * @param {Array} packets
 * @return {ArrayBuffer} encoded payload
 * @api private
 */
c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}b?e[f++]=0:e[f++]=1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},/**
 * Encode as Blob
 */
c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,u){var i=new u([c.buffer,h.buffer,a]);b(null,i)}})}h(a,d,function(a,c){return b(new u(c))})},/*
 * Decodes data when a payload is maybe expected. Strings are decoded by
 * interpreting each byte as a key code for entries marked to start with 0. See
 * description of encodePayloadAsBinary
 *
 * @param {ArrayBuffer} data, callback method
 * @api public
 */
c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(t,0,1);e=k(e,2+j.length),j=parseInt(j);var m=k(e,0,j);if(i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(n){
// iPhone Safari doesn't let you apply to typed arrays
var o=new Uint8Array(m);m="";for(var l=0;l<o.length;l++)m+=String.fromCharCode(o[l])}f.push(m),e=k(e,j)}var p=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,b,c){/**
 * Gets the keys for an object.
 *
 * @return {Array} keys
 * @api private
 */
b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],21:[function(a,b,c){(function(c){/**
 * Checks for binary data.
 *
 * Right now only Buffer and ArrayBuffer are supported..
 *
 * @param {Object} anything
 * @api public
 */
function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}/*
 * Module requirements.
 */
var e=a("isarray");/**
 * Module exports.
 */
b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:24}],22:[function(a,b,c){/**
 * Module exports.
 *
 * Logic borrowed from Modernizr:
 *
 *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js
 */
try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(d){
// if XMLHttp support is disabled in IE then it will throw
// when trying to create
b.exports=!1}},{}],23:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],24:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],25:[function(a,b,c){/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */
function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */
function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */
function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}/**
 * Pluralization helper.
 */
function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}/**
 * Helpers.
 */
var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} options
 * @return {String|Number}
 * @api public
 */
b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],26:[function(a,b,c){(function(a){/**
 * JSON parse.
 *
 * @see Based on jQuery#parseJSON (MIT) and JSON2
 * @api private
 */
var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){
// Attempt to parse using the native JSON parser first
return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],27:[function(a,b,c){/**
 * Compiles a querystring
 * Returns string representation of the object
 *
 * @param {Object}
 * @api private
 */
c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},/**
 * Parses a simple querystring into an object
 *
 * @param {String} qs
 * @api private
 */
c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],28:[function(a,b,c){/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */
var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");-1!=c&&-1!=f&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return-1!=c&&-1!=f&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],29:[function(b,c,d){(function(b){!function(e){
// Taken from https://mths.be/punycode
function f(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}
// Taken from https://mths.be/punycode
function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=u(b>>>10&1023|55296),b=56320|1023&b),e+=u(b);return e}function h(a){if(a>=55296&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}/*--------------------------------------------------------------------------*/
function i(a,b){return u(a>>b&63|128)}function j(a){if(0==(4294967168&a))// 1-byte sequence
return u(a);var b="";// 2-byte sequence
// 3-byte sequence
// 4-byte sequence
return 0==(4294965248&a)?b=u(a>>6&31|192):0==(4294901760&a)?(h(a),b=u(a>>12&15|224),b+=i(a,6)):0==(4292870144&a)&&(b=u(a>>18&7|240),b+=i(a,12),b+=i(a,6)),b+=u(63&a|128)}function k(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=j(b);return g}/*--------------------------------------------------------------------------*/
function l(){if(t>=s)throw Error("Invalid byte index");var a=255&r[t];if(t++,128==(192&a))return 63&a;
// If we end up here, it’s not a continuation byte
throw Error("Invalid continuation byte")}function m(){var a,b,c,d,e;if(t>s)throw Error("Invalid byte index");if(t==s)return!1;
// 1-byte sequence (no continuation bytes)
if(a=255&r[t],t++,0==(128&a))return a;
// 2-byte sequence
if(192==(224&a)){var b=l();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}
// 3-byte sequence (may include unpaired surrogates)
if(224==(240&a)){if(b=l(),c=l(),e=(15&a)<<12|b<<6|c,e>=2048)return h(e),e;throw Error("Invalid continuation byte")}
// 4-byte sequence
if(240==(248&a)&&(b=l(),c=l(),d=l(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function n(a){r=f(a),s=r.length,t=0;for(var b,c=[];(b=m())!==!1;)c.push(b);return g(c)}
// Detect free variables `exports`
var o="object"==typeof d&&d,p="object"==typeof c&&c&&c.exports==o&&c,q="object"==typeof b&&b;q.global!==q&&q.window!==q||(e=q);/*--------------------------------------------------------------------------*/
var r,s,t,u=String.fromCharCode,v={version:"2.0.0",encode:k,decode:n};
// Some AMD build optimizers, like r.js, check for specific condition patterns
// like the following:
if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return v});else if(o&&!o.nodeType)if(p)// in Node.js or RingoJS v0.8.0+
p.exports=v;else{// in Narwhal or RingoJS v0.7.0-
var w={},x=w.hasOwnProperty;for(var y in v)x.call(v,y)&&(o[y]=v[y])}else// in Rhino or a web browser
e.utf8=v}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],30:[function(a,b,c){"use strict";/**
 * Return a string representing the specified number.
 *
 * @param {Number} num The number to convert.
 * @returns {String} The string representation of the number.
 * @api public
 */
function d(a){var b="";do b=h[a%i]+b,a=Math.floor(a/i);while(a>0);return b}/**
 * Return the integer value specified by the given string.
 *
 * @param {String} str The string to convert.
 * @returns {Number} The integer value represented by the string.
 * @api public
 */
function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}/**
 * Yeast: A tiny growing id generator.
 *
 * @returns {String} A unique id.
 * @api public
 */
function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}
//
// Map each character to its index.
//
for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;i>l;l++)j[h[l]]=l;
//
// Expose the `yeast`, `encode` and `decode` functions.
//
f.encode=d,f.decode=e,b.exports=f},{}],31:[function(a,b,c){/**
 * Looks up an existing `Manager` for multiplexing.
 * If the user summons:
 *
 *   `io('http://localhost/a');`
 *   `io('http://localhost/b');`
 *
 * We reuse the existing instance based on same scheme/port/host,
 * and we initialize sockets for each namespace.
 *
 * @api public
 */
function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id,k=d.path,l=i[j]&&k in i[j].nsps,m=b.forceNew||b["force new connection"]||!1===b.multiplex||l;return m?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}/**
 * Module dependencies.
 */
var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");/**
 * Module exports.
 */
b.exports=c=d;/**
 * Managers cache.
 */
var i=c.managers={};/**
 * Protocol version.
 *
 * @api public
 */
c.protocol=f.protocol,/**
 * `connect`.
 *
 * @param {String} uri
 * @api public
 */
c.connect=d,/**
 * Expose constructors for standalone build.
 *
 * @api public
 */
c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,b,c){/**
 * `Manager` constructor.
 *
 * @param {String} engine instance or engine uri/opts
 * @param {Object} options
 * @api public
 */
function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}/**
 * Module dependencies.
 */
var e=a("engine.io-client"),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=a("debug")("socket.io-client:manager"),l=a("indexof"),m=a("backo2"),n=Object.prototype.hasOwnProperty;/**
 * Module exports
 */
b.exports=d,/**
 * Propagate given event to sockets and emit on `this`
 *
 * @api private
 */
d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},/**
 * Update `socket.id` of all sockets
 *
 * @api private
 */
d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},/**
 * Mix in `Emitter`.
 */
g(d.prototype),/**
 * Sets the `reconnection` config.
 *
 * @param {Boolean} true/false if it should automatically reconnect
 * @return {Manager} self or value
 * @api public
 */
d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},/**
 * Sets the reconnection attempts config.
 *
 * @param {Number} max reconnection attempts before giving up
 * @return {Manager} self or value
 * @api public
 */
d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},/**
 * Sets the delay between reconnections.
 *
 * @param {Number} delay
 * @return {Manager} self or value
 * @api public
 */
d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},/**
 * Sets the maximum delay between reconnections.
 *
 * @param {Number} delay
 * @return {Manager} self or value
 * @api public
 */
d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},/**
 * Sets the connection timeout. `false` to disable
 *
 * @return {Manager} self or value
 * @api public
 */
d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},/**
 * Starts trying to reconnect if reconnection is enabled and we have not
 * started reconnecting yet
 *
 * @api private
 */
d.prototype.maybeReconnectOnOpen=function(){
// Only try to reconnect if it's the first time we're connecting
!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&
// keeps reconnection from firing twice for the same reconnection loop
this.reconnect()},/**
 * Sets the current transport `socket`.
 *
 * @param {Function} optional, callback
 * @return {Manager} self
 * @api public
 */
d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;
// emit `open`
var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}else
// Only do this if there is no fn to handle the error
c.maybeReconnectOnOpen()});
// emit `connect_timeout`
if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);
// set timer
var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},/**
 * Called upon transport open.
 *
 * @api private
 */
d.prototype.onopen=function(){k("open"),
// clear old subs
this.cleanup(),
// mark as open
this.readyState="open",this.emit("open");
// add new subs
var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},/**
 * Called upon a ping.
 *
 * @api private
 */
d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},/**
 * Called upon a packet.
 *
 * @api private
 */
d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},/**
 * Called with data.
 *
 * @api private
 */
d.prototype.ondata=function(a){this.decoder.add(a)},/**
 * Called when parser fully decodes a packet.
 *
 * @api private
 */
d.prototype.ondecoded=function(a){this.emit("packet",a)},/**
 * Called upon socket error.
 *
 * @api private
 */
d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},/**
 * Creates a new socket for the given `nsp`.
 *
 * @return {Socket}
 * @api public
 */
d.prototype.socket=function(a){function b(){~l(d.connecting,c)||d.connecting.push(c)}var c=this.nsps[a];if(!c){c=new f(this,a),this.nsps[a]=c;var d=this;c.on("connecting",b),c.on("connect",function(){c.id=d.engine.id}),this.autoConnect&&
// manually call here since connecting evnet is fired before listening
b()}return c},/**
 * Called upon a socket close.
 *
 * @param {Socket} socket
 */
d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},/**
 * Writes a packet.
 *
 * @param {Object} packet
 * @api private
 */
d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?// add packet to the queue
b.packetBuffer.push(a):(
// encode, then write to engine with result
b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},/**
 * If packet buffer is non-empty, begins encoding the
 * next packet in line.
 *
 * @api private
 */
d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},/**
 * Clean up transport subscriptions and packet buffer.
 *
 * @api private
 */
d.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},/**
 * Close the current socket.
 *
 * @api private
 */
d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&
// `onclose` will not fire because
// an open event never happened
this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},/**
 * Called upon engine close.
 *
 * @api private
 */
d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},/**
 * Attempt a reconnection.
 *
 * @api private
 */
d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),
// check again for the case socket closed in above events
a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},/**
 * Called upon successful reconnect.
 *
 * @api private
 */
d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,b,c){/**
 * Helper for subscriptions.
 *
 * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`
 * @param {String} event name
 * @param {Function} callback
 * @api public
 */
function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}/**
 * Module exports.
 */
b.exports=d},{}],34:[function(a,b,c){/**
 * `Socket` constructor.
 *
 * @api public
 */
function d(a,b){this.io=a,this.nsp=b,this.json=this,// compat
this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}/**
 * Module dependencies.
 */
var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");/**
 * Module exports.
 */
b.exports=c=d;/**
 * Internal events (blacklisted).
 * These events can't be emitted by the user.
 *
 * @api private
 */
var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},m=f.prototype.emit;/**
 * Mix in `Emitter`.
 */
f(d.prototype),/**
 * Subscribe to open, close and packet events
 *
 * @api private
 */
d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},/**
 * "Opens" the socket.
 *
 * @api public
 */
d.prototype.open=d.prototype.connect=function(){// ensure open
return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},/**
 * Sends a `message` event.
 *
 * @return {Socket} self
 * @api public
 */
d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},/**
 * Override `emit`.
 * If the event is in `events`, it's emitted normally.
 *
 * @param {String} event name
 * @return {Socket} self
 * @api public
 */
d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;// default
k(b)&&(c=e.BINARY_EVENT);// binary
var d={type:c,data:b};
// event ack callback
return d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this},/**
 * Sends a packet.
 *
 * @param {Object} packet
 * @api private
 */
d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},/**
 * Called upon engine `open`.
 *
 * @api private
 */
d.prototype.onopen=function(){j("transport is open - connecting"),
// write connect packet if necessary
"/"!=this.nsp&&this.packet({type:e.CONNECT})},/**
 * Called upon engine `close`.
 *
 * @param {String} reason
 * @api private
 */
d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},/**
 * Called with socket packet.
 *
 * @param {Object} packet
 * @api private
 */
d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},/**
 * Called upon a server event.
 *
 * @param {Object} packet
 * @api private
 */
d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},/**
 * Produces an ack callback to emit with an event.
 *
 * @api private
 */
d.prototype.ack=function(a){var b=this,c=!1;return function(){
// prevent double callbacks
if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},/**
 * Called upon a server acknowlegement.
 *
 * @param {Object} packet
 * @api private
 */
d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(j("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):j("bad ack %s",a.id)},/**
 * Called upon server connect.
 *
 * @api private
 */
d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},/**
 * Emit buffered events (received and emitted).
 *
 * @api private
 */
d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},/**
 * Called upon server disconnect.
 *
 * @api private
 */
d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},/**
 * Called upon forced client/server side disconnections,
 * this method ensures the manager stops tracking us and
 * that reconnections don't get triggered for this.
 *
 * @api private.
 */
d.prototype.destroy=function(){if(this.subs){
// clean subscriptions to avoid reconnections
for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},/**
 * Disconnects the socket manually.
 *
 * @return {Socket} self
 * @api public
 */
d.prototype.close=d.prototype.disconnect=function(){
// remove socket from pool
// fire events
return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},/**
 * Sets the compress flag.
 *
 * @param {Boolean} if `true`, compresses the sending data
 * @return {Socket} self
 * @api public
 */
d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,b,c){(function(c){/**
 * URL parser.
 *
 * @param {String} url
 * @param {Object} An object meant to mimic window.location.
 *                 Defaults to window.location.
 * @api public
 */
function d(a,b){var d=a,b=b||c.location;null==a&&(a=b.protocol+"//"+b.host),
// relative path support
"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),
// parse
f("parse %s",a),d=e(a)),
// make sure we treat `localhost:80` and `localhost` equally
d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";var g=-1!==d.host.indexOf(":"),h=g?"["+d.host+"]":d.host;
// define unique id
// define href
return d.id=d.protocol+"://"+h+":"+d.port,d.href=d.protocol+"://"+h+(b&&b.port==d.port?"":":"+d.port),d}/**
 * Module dependencies.
 */
var e=a("parseuri"),f=a("debug")("socket.io-client:url");/**
 * Module exports.
 */
b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,b,c){/**
 * Initialize backoff timer with `opts`.
 *
 * - `min` initial timeout in milliseconds [100]
 * - `max` max timeout [10000]
 * - `jitter` [0]
 * - `factor` [2]
 *
 * @param {Object} opts
 * @api public
 */
function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}/**
 * Expose `Backoff`.
 */
b.exports=d,/**
 * Return the backoff duration.
 *
 * @return {Number}
 * @api public
 */
d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},/**
 * Reset the number of attempts.
 *
 * @api public
 */
d.prototype.reset=function(){this.attempts=0},/**
 * Set the minimum duration
 *
 * @api public
 */
d.prototype.setMin=function(a){this.ms=a},/**
 * Set the maximum duration
 *
 * @api public
 */
d.prototype.setMax=function(a){this.max=a},/**
 * Set the jitter
 *
 * @api public
 */
d.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,b,c){/**
 * Slice reference.
 */
var d=[].slice;/**
 * Bind `obj` to `fn`.
 *
 * @param {Object} obj
 * @param {Function|String} fn or string
 * @return {Function}
 * @api public
 */
b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],38:[function(a,b,c){/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */
function d(a){return a?e(a):void 0}/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */
function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}/**
 * Expose `Emitter`.
 */
b.exports=d,/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */
d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){
// all
if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;
// specific event
var c=this._callbacks["$"+a];if(!c)return this;
// remove all handlers
if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */
d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */
d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */
d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,b,c){(function(c){/**
 * Checks for binary data.
 *
 * Right now only Buffer and ArrayBuffer are supported..
 *
 * @param {Object} anything
 * @api public
 */
function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){
// see: https://github.com/Automattic/has-binary/pull/4
a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}/*
 * Module requirements.
 */
var e=a("isarray");/**
 * Module exports.
 */
b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:43}],42:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],43:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,b,c){(function(b){/*global Blob,File*/
/**
 * Module requirements
 */
var d=a("isarray"),e=a("./is-buffer");/**
 * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.
 * Anything with blobs or files should be fed through removeBlobs before coming
 * here.
 *
 * @param {Object} packet - socket.io event packet
 * @return {Object} with deconstructed packet and list of buffers
 * @api public
 */
c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;// number of binary 'attachments'
return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},/**
 * Reconstructs a binary packet from its placeholder packet and buffers
 *
 * @param {Object} packet - event packet with placeholders
 * @param {Array} buffers - binary buffers to put in placeholder positions
 * @return {Object} reconstructed packet
 * @api public
 */
c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var e=b[a.num];// appropriate buffer (should be natural order anyway)
return e}if(d(a)){for(var f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}// no longer useful
return a.data=c(a.data),a.attachments=void 0,a},/**
 * Asynchronously removes Blobs or Files from data via
 * FileReader's readAsArrayBuffer method. Used before encoding
 * data as msgpack. Calls callback with the blobless data.
 *
 * @param {Object} data
 * @param {Function} callback
 * @api private
 */
c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;
// convert any blob
if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;
// async filereader
var k=new FileReader;k.onload=function(){// this.result == arraybuffer
j?j[i]=this.result:h=this.result,
// if nothing pending its callback time
--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))// handle array
for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))// and object
for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,b,c){/**
 * A socket.io Encoder instance
 *
 * @api public
 */
function d(){}/**
 * Encode packet as string.
 *
 * @param {Object} packet
 * @return {String} encoded
 * @api private
 */
function e(a){var b="",d=!1;
// first is type
// attachments if we have them
// if we have a namespace other than `/`
// we append it followed by a comma `,`
// immediately followed by the id
// json data
return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}/**
 * Encode packet as 'buffer sequence' by removing blobs, and
 * deconstructing packet into object with placeholders and
 * a list of buffers.
 *
 * @param {Object} packet
 * @return {Buffer} encoded
 * @api private
 */
function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),// add packet info to beginning of data list
b(f)}n.removeBlobs(a,c)}/**
 * A socket.io Decoder instance
 *
 * @return {Object} decoder
 * @api public
 */
function g(){this.reconstructor=null}/**
 * Decode a packet String (JSON data)
 *
 * @param {String} str
 * @return {Object} packet
 * @api private
 */
function h(a){var b={},d=0;if(
// look up type
b.type=Number(a.charAt(0)),null==c.types[b.type])return j();
// look up attachments if type binary
if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}
// look up namespace (if any)
if("/"==a.charAt(d+1))for(b.nsp="";++d;){var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";
// look up id
var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}
// look up json data
if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(h){return j()}return k("decoded %s as %j",a,b),b}/**
 * A manager of a binary event's 'buffer sequence'. Should
 * be constructed whenever a packet of type BINARY_EVENT is
 * decoded.
 *
 * @param {Object} packet
 * @return {BinaryReconstructor} initialized reconstructor
 * @api private
 */
function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}/**
 * Module dependencies.
 */
var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");/**
 * Protocol version.
 *
 * @api public
 */
c.protocol=4,/**
 * Packet types.
 *
 * @api public
 */
c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],/**
 * Packet type `connect`.
 *
 * @api public
 */
c.CONNECT=0,/**
 * Packet type `disconnect`.
 *
 * @api public
 */
c.DISCONNECT=1,/**
 * Packet type `event`.
 *
 * @api public
 */
c.EVENT=2,/**
 * Packet type `ack`.
 *
 * @api public
 */
c.ACK=3,/**
 * Packet type `error`.
 *
 * @api public
 */
c.ERROR=4,/**
 * Packet type 'binary event'
 *
 * @api public
 */
c.BINARY_EVENT=5,/**
 * Packet type `binary ack`. For acks with binary arguments.
 *
 * @api public
 */
c.BINARY_ACK=6,/**
 * Encoder constructor.
 *
 * @api public
 */
c.Encoder=d,/**
 * Decoder constructor.
 *
 * @api public
 */
c.Decoder=g,/**
 * Encode a packet as a single string if non-binary, or as a
 * buffer sequence, depending on packet type.
 *
 * @param {Object} obj - packet object
 * @param {Function} callback - function to handle encodings (likely engine.write)
 * @return Calls callback with Array of encodings
 * @api public
 */
d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},/**
 * Mix in `Emitter` with Decoder.
 */
m(g.prototype),/**
 * Decodes an ecoded packet string into packet JSON.
 *
 * @param {String} obj - encoded packet
 * @return {Object} packet
 * @api public
 */
g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);// raw binary data
if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},/**
 * Deallocates a parser's resources
 *
 * @api public
 */
g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},/**
 * Method to be called when binary data received from connection
 * after a BINARY_EVENT packet.
 *
 * @param {Buffer | ArrayBuffer} binData - the raw binary data received
 * @return {null | Object} returns null if more binary data is expected or
 *   a reconstructed packet object if all buffers have been received.
 * @api private
 */
i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){// done with buffer list
var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},/**
 * Cleans up binary packet reconstruction variables.
 *
 * @api private
 */
i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(a,b,c){(function(a){/**
 * Returns true if obj is a buffer or an arraybuffer.
 *
 * @api private
 */
function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],49:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(b,c,d){(function(b){(function(){
// Public: Initializes JSON 3 using the given `context` object, attaching the
// `stringify` and `parse` functions to the specified `exports` object.
function e(a,b){
// Internal: Determines whether the native `JSON.stringify` and `parse`
// implementations are spec-compliant. Based on work by Ken Snyder.
function c(a){if(c[a]!==q)
// Return cached feature test result.
return c[a];var e;if("bug-string-char-index"==a)
// IE <= 7 doesn't support accessing string characters using square
// bracket notation. IE 8 only supports this for primitives.
e="a"!="a"[0];else if("json"==a)
// Indicates whether both `JSON.stringify` and `JSON.parse` are
// supported.
e=c("json-stringify")&&c("json-parse");else{var g,h='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
// Test `JSON.stringify`.
if("json-stringify"==a){var i=b.stringify,k="function"==typeof i&&t;if(k){
// A test function object with a custom `toJSON` method.
(g=function(){return 1}).toJSON=g;try{k="0"===i(0)&&"0"===i(new d)&&'""'==i(new f)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(g)&&"[1]"==i([g])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[g,!0,!1,null,"\x00\b\n\f\r	"]})==h&&"1"===i(null,g)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new j(-1))}catch(l){k=!1}}e=k}
// Test `JSON.parse`.
if("json-parse"==a){var m=b.parse;if("function"==typeof m)try{
// FF 3.1b1, b2 will throw an exception if a bare literal is provided.
// Conforming implementations should also coerce the initial argument to
// a string prior to parsing.
if(0===m("0")&&!m(!1)){
// Simple parsing test.
g=m(h);var n=5==g.a.length&&1===g.a[0];if(n){try{
// Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.
n=!m('"	"')}catch(l){}if(n)try{
// FF 4.0 and 4.0.1 allow leading `+` signs and leading
// decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow
// certain octal literals.
n=1!==m("01")}catch(l){}if(n)try{
// FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal
// points. These environments, along with FF 3.1b1 and 2,
// also allow trailing commas in JSON objects and arrays.
n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}e=n}}return c[a]=!!e}a||(a=i.Object()),b||(b=i.Object());
// Native constructor aliases.
var d=a.Number||i.Number,f=a.String||i.String,h=a.Object||i.Object,j=a.Date||i.Date,k=a.SyntaxError||i.SyntaxError,l=a.TypeError||i.TypeError,m=a.Math||i.Math,n=a.JSON||i.JSON;
// Delegate to the native `stringify` and `parse` implementations.
"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse);
// Convenience aliases.
var o,p,q,r=h.prototype,s=r.toString,t=new j(-0xc782b5b800cec);try{
// The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical
// results for certain dates in Opera >= 10.53.
t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(u){}if(!c("json")){
// Common `[[Class]]` name aliases.
var v="[object Function]",w="[object Date]",x="[object Number]",y="[object String]",z="[object Array]",A="[object Boolean]",B=c("bug-string-char-index");
// Define additional utility methods if the `Date` methods are buggy.
if(!t)var C=m.floor,D=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(a,b){return D[b]+365*(a-1970)+C((a-1969+(b=+(b>1)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};
// Public: Serializes a JavaScript `value` as a JSON string. The optional
// `filter` argument may specify either a function that alters how object and
// array members are serialized, or an array of strings and numbers that
// indicates which properties should be serialized. The optional `width`
// argument may be either a string or number that specifies the indentation
// level of the output.
if(
// Internal: Determines if a property is a direct property of the given
// object. Delegates to the native `Object#hasOwnProperty` method.
(o=r.hasOwnProperty)||(o=function(a){var b,c={};
// Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but
// supports the mutable *proto* property.
// Capture a reference to the top-level `Object` constructor.
// Use the `constructor` property to simulate `Object#hasOwnProperty` in
// other environments.
return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){
// Capture and break the object's prototype chain (see section 8.6.2
// of the ES 5.1 spec). The parenthesized expression prevents an
// unsafe transformation by the Closure Compiler.
var b=this.__proto__,c=a in(this.__proto__=null,this);
// Restore the original prototype chain.
return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var c,d,e,f=0;
// Tests for bugs in the current environment's `for...in` algorithm. The
// `valueOf` property inherits the non-enumerable flag from
// `Object.prototype` in older versions of IE, Netscape, and Mozilla.
(c=function(){this.valueOf=0}).prototype.valueOf=0,
// Iterate over a new instance of the `Properties` class.
d=new c;for(e in d)
// Ignore all properties inherited from `Object.prototype`.
o.call(d,e)&&f++;
// Normalize the iteration algorithm.
// Safari <= 2.0.4 enumerates shadowed properties twice.
// A list of non-enumerable properties inherited from `Object.prototype`.
// IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable
// properties.
return c=d=null,f?p=2==f?function(a,b){var c,d={},e=s.call(a)==v;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==v;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var c,e,f=s.call(a)==v,h=!f&&"function"!=typeof a.constructor&&g[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(c in a)f&&"prototype"==c||!h.call(a,c)||b(c);for(e=d.length;c=d[--e];h.call(a,c)&&b(c));}),p(a,b)},!c("json-stringify")){
// Internal: A map of control characters and their escaped equivalents.
var F={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},G="000000",H=function(a,b){
// The `|| 0` expression is necessary to work around a bug in
// Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== "0"`.
return(G+(b||0)).slice(-a)},I="\\u00",J=function(a){for(var b='"',c=0,d=a.length,e=!B||d>10,f=e&&(B?a.split(""):a);d>c;c++){var g=a.charCodeAt(c);
// If the character is a control character, append its Unicode or
// shorthand escape sequence; otherwise, append the character as-is.
switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=F[g];break;default:if(32>g){b+=I+H(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},K=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,v,B,D,F,G,I,L;try{
// Necessary for host object support.
h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=s.call(h),i!=w||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=x&&i!=y&&i!=z||o.call(h,"toJSON"))&&(
// Prototype <= 1.6.1 adds non-standard `toJSON` methods to the
// `Number`, `String`, `Date`, and `Array` prototypes. JSON 3
// ignores all `toJSON` methods on these objects unless they are
// defined directly on an instance.
h=h.toJSON(a));else if(h>-1/0&&1/0>h){
// Dates are serialized according to the `Date#toJSON` method
// specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15
// for the ISO 8601 date time string format.
if(E){for(m=C(h/864e5),j=C(m/365.2425)+1970-1;E(j+1,0)<=m;j++);for(k=C((m-E(j,0))/30.42);E(j,k+1)<=m;k++);m=1+m-E(j,k),
// The `time` value specifies the time within the day (see ES
// 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used
// to compute `A modulo B`, as the `%` operator does not
// correspond to the `modulo` operation for negative numbers.
n=(h%864e5+864e5)%864e5,
// The hours, minutes, seconds, and milliseconds are obtained by
// decomposing the time within the day. See section 15.9.1.10.
r=C(n/36e5)%24,t=C(n/6e4)%60,u=C(n/1e3)%60,v=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),v=h.getUTCMilliseconds();
// Serialize extended years correctly.
h=(0>=j||j>=1e4?(0>j?"-":"+")+H(6,0>j?-j:j):H(4,j))+"-"+H(2,k+1)+"-"+H(2,m)+
// Months, dates, hours, minutes, and seconds should have two
// digits; milliseconds should have three.
"T"+H(2,r)+":"+H(2,t)+":"+H(2,u)+
// Milliseconds are optional in ES 5.0, but required in 5.1.
"."+H(3,v)+"Z"}else h=null;if(c&&(
// If a replacement function was provided, call it to obtain the value
// for serialization.
h=c.call(b,a,h)),null===h)return"null";if(i=s.call(h),i==A)
// Booleans are represented literally.
return""+h;if(i==x)
// JSON numbers must be finite. `Infinity` and `NaN` are serialized as
// `"null"`.
return h>-1/0&&1/0>h?""+h:"null";if(i==y)
// Strings are double-quoted and escaped.
return J(""+h);
// Recursively serialize objects and arrays.
if("object"==typeof h){
// Check for cyclic structures. This is a linear search; performance
// is inversely proportional to the number of unique nested objects.
for(G=g.length;G--;)if(g[G]===h)
// Cyclic structures cannot be serialized by `JSON.stringify`.
throw l();if(
// Add the object to the stack of traversed objects.
g.push(h),B=[],I=f,f+=e,i==z){
// Recursively serialize array elements.
for(F=0,G=h.length;G>F;F++)D=K(F,h,c,d,e,f,g),B.push(D===q?"null":D);L=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+I+"]":"["+B.join(",")+"]":"[]"}else
// Recursively serialize object members. Members are selected from
// either a user-specified list of property names, or the object
// itself.
p(d||h,function(a){var b=K(a,h,c,d,e,f,g);b!==q&&
// According to ES 5.1 section 15.12.3: "If `gap` {whitespace}
// is not the empty string, let `member` {quote(property) + ":"}
// be the concatenation of `member` and the `space` character."
// The "`space` character" refers to the literal space
// character, not the `space` {width} argument provided to
// `JSON.stringify`.
B.push(J(a)+":"+(e?" ":"")+b)}),L=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+I+"}":"{"+B.join(",")+"}":"{}";
// Remove the object from the traversed object stack.
return g.pop(),L}};
// Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
b.stringify=function(a,b,c){var d,e,f,h;if(g[typeof b]&&b)if((h=s.call(b))==v)e=b;else if(h==z){
// Convert the property names array into a makeshift set.
f={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=s.call(i),(h==y||h==x)&&(f[i]=1));}if(c)if((h=s.call(c))==x){
// Convert the `width` to an integer and create a string containing
// `width` number of space characters.
if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==y&&(d=c.length<=10?c:c.slice(0,10));
// Opera <= 7.54u2 discards the values associated with empty string keys
// (`""`) only if they are used directly within an object member list
// (e.g., `!("" in { "": 1})`).
return K("",(i={},i[""]=a,i),e,f,d,"",[])}}
// Public: Parses a JSON source string.
if(!c("json-parse")){var L,M,N=f.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,k()},Q=function(){for(var a,b,c,d,e,f=M,g=f.length;g>L;)switch(e=f.charCodeAt(L)){case 9:case 10:case 13:case 32:
// Skip whitespace tokens, including tabs, carriage returns, line
// feeds, and space characters.
L++;break;case 123:case 125:case 91:case 93:case 58:case 44:
// Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at
// the current position.
return a=B?f.charAt(L):f[L],L++,a;case 34:
// `"` delimits a JSON string; advance to the next character and
// begin parsing the string. String tokens are prefixed with the
// sentinel `@` character to distinguish them from punctuators and
// end-of-string tokens.
for(a="@",L++;g>L;)if(e=f.charCodeAt(L),32>e)
// Unescaped ASCII control characters (those with a code unit
// less than the space character) are not permitted.
P();else if(92==e)switch(e=f.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:
// Revive escaped control characters.
a+=O[e],L++;break;case 117:for(b=++L,c=L+4;c>L;L++)e=f.charCodeAt(L),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||P();
// Revive the escaped character.
a+=N("0x"+f.slice(b,L));break;default:
// Invalid escape sequence.
P()}else{if(34==e)
// An unescaped double-quote character marks the end of the
// string.
break;
// Optimize for the common case where a string is valid.
for(e=f.charCodeAt(L),b=L;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++L);
// Append the string as-is.
a+=f.slice(b,L)}if(34==f.charCodeAt(L))
// Advance to the next character and return the revived string.
return L++,a;
// Unterminated string.
P();default:
// Parse an integer or floating-point value.
if(b=L,45==e&&(d=!0,e=f.charCodeAt(++L)),e>=48&&57>=e){
// Parse the integer component.
for(
// Leading zeroes are interpreted as octal literals.
48==e&&(e=f.charCodeAt(L+1),e>=48&&57>=e)&&
// Illegal octal literal.
P(),d=!1;g>L&&(e=f.charCodeAt(L),e>=48&&57>=e);L++);
// Floats cannot contain a leading decimal point; however, this
// case is already accounted for by the parser.
if(46==f.charCodeAt(L)){
// Parse the decimal component.
for(c=++L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&
// Illegal trailing decimal.
P(),L=c}if(e=f.charCodeAt(L),101==e||69==e){
// Parse the exponential component.
for(e=f.charCodeAt(++L),43!=e&&45!=e||L++,c=L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&
// Illegal empty exponent.
P(),L=c}
// Coerce the parsed value to a JavaScript number.
return+f.slice(b,L)}
// `true`, `false`, and `null` literals.
if(
// A negative sign may only precede numbers.
d&&P(),"true"==f.slice(L,L+4))return L+=4,!0;if("false"==f.slice(L,L+5))return L+=5,!1;if("null"==f.slice(L,L+4))return L+=4,null;
// Unrecognized token.
P()}
// Return the sentinel `$` character if the parser has reached the end
// of the source string.
return"$"},R=function(a){var b,c;if("$"==a&&
// Unexpected end of input.
P(),"string"==typeof a){if("@"==(B?a.charAt(0):a[0]))
// Remove the sentinel `@` character.
return a.slice(1);
// Parse object and array literals.
if("["==a){for(
// Parses a JSON array, returning a new JavaScript array.
b=[];a=Q(),"]"!=a;c||(c=!0))
// If the array literal contains elements, the current token
// should be a comma separating the previous element from the
// next.
c&&(","==a?(a=Q(),"]"==a&&P()):
// A `,` must separate each array element.
P()),
// Elisions and leading commas are not permitted.
","==a&&P(),b.push(R(a));return b}if("{"==a){for(
// Parses a JSON object, returning a new JavaScript object.
b={};a=Q(),"}"!=a;c||(c=!0))
// If the object literal contains members, the current token
// should be a comma separator.
c&&(","==a?(a=Q(),"}"==a&&P()):
// A `,` must separate each object member.
P()),
// Leading commas are not permitted, object property names must be
// double-quoted strings, and a `:` must separate each property
// name and value.
","!=a&&"string"==typeof a&&"@"==(B?a.charAt(0):a[0])&&":"==Q()||P(),b[a.slice(1)]=R(Q());return b}
// Unexpected token encountered.
P()}return a},S=function(a,b,c){var d=T(a,b,c);d===q?delete a[b]:a[b]=d},T=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)
// `forEach` can't be used to traverse an array in Opera <= 8.54
// because its `Object#hasOwnProperty` implementation returns `false`
// for array indices (e.g., `![1, 2, 3].hasOwnProperty("0")`).
if(s.call(e)==z)for(d=e.length;d--;)S(e,d,c);else p(e,function(a){S(e,a,c)});return c.call(a,b,e)};
// Public: `JSON.parse`. See ES 5.1 section 15.12.2.
b.parse=function(a,b){var c,d;
// If a JSON string contains multiple tokens, it is invalid.
// Reset the parser state.
return L=0,M=""+a,c=R(Q()),"$"!=Q()&&P(),L=M=null,b&&s.call(b)==v?T((d={},d[""]=c,d),"",b):c}}}return b.runInContext=e,b}
// Detect the `define` function exposed by asynchronous module loaders. The
// strict `define` check is necessary for compatibility with `r.js`.
var f="function"==typeof a&&a.amd,g={"function":!0,object:!0},h=g[typeof d]&&d&&!d.nodeType&&d,i=g[typeof window]&&window||this,j=h&&g[typeof c]&&c&&!c.nodeType&&"object"==typeof b&&b;if(!j||j.global!==j&&j.window!==j&&j.self!==j||(i=j),h&&!f)
// Export for CommonJS environments.
e(i,h);else{
// Export for web browsers and JavaScript engines.
var k=i.JSON,l=i.JSON3,m=!1,n=e(i,i.JSON3={
// Public: Restores the original value of the global `JSON` object and
// returns a reference to the `JSON3` object.
noConflict:function(){return m||(m=!0,i.JSON=k,i.JSON3=l,k=l=null),n}});i.JSON={parse:n.parse,stringify:n.stringify}}
// Export for asynchronous module loaders.
f&&a(function(){return n})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],51:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}]},{},[31])(31)}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.feathers=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */
function d(){
// is webkit? http://stackoverflow.com/a/16459606/376773
// is firebug? http://stackoverflow.com/a/398120/376773
// is firefox >= v31?
// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */
function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));
// the final "%c" is somewhat tricky, because there could be other
// arguments passed either before or after the %c, so we need to
// figure out the correct index to insert the CSS into
var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(
// we only are interested in the *last* %c
// (the user may have provided their own)
f=e))}),a.splice(f,0,d),a}/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */
function f(){
// this hackery is required for IE8/9, where
// the `console.log` function doesn't have 'apply'
return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */
function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */
function h(){var a;try{a=c.storage.debug}catch(b){}return a}/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */
function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":2}],2:[function(a,b,c){/**
 * Select a color.
 *
 * @return {Number}
 * @api private
 */
function d(){return c.colors[k++%c.colors.length]}/**
 * Create a debugger with the given `namespace`.
 *
 * @param {String} namespace
 * @return {Function}
 * @api public
 */
function e(a){
// define the `disabled` version
function b(){}
// define the `enabled` version
function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(
// anything else let's inspect with %o
g=["%o"].concat(g));
// apply any `formatters` transformations
var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){
// if we encounter an escaped % then don't increase the array index
if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),
// now we need to remove `args[index]` since it's inlined in the `format`
g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}/**
 * Enables a debug mode by namespaces. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} namespaces
 * @api public
 */
function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}/**
 * Disable debug output.
 *
 * @api public
 */
function g(){c.enable("")}/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */
function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}/**
 * Coerce `val`.
 *
 * @param {Mixed} val
 * @return {Mixed}
 * @api private
 */
function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};/**
 * Previously assigned color.
 */
var j,k=0},{ms:44}],3:[function(a,b,c){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,
// Backwards-compat with node 0.10.x
d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,
// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
d.defaultMaxListeners=10,
// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;
// If there is no 'error' event listener then throw.
if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){
// fast cases
case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;
// slower
default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");
// To avoid recursion in the case that type === "newListener"! Before
// adding it to the listeners, first emit "newListener".
// If we've already got an array, just append.
// Adding the second element, need to change to array.
// Optimize the case of one listener. Don't need the extra array object.
// Check for listener leak
// not supported in IE 10
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},
// emits a 'removeListener' event iff the listener was removed
d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;
// not listening for removeListener, no need to emit
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;
// emit removeListener for all listeners on all events
if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)
// LIFO order
for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],4:[function(a,b,c){b.exports=a("./lib/client")},{"./lib/client":6}],5:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(){return function(a){var b=a.app;Object.assign(a.params,{user:b.get("user"),token:b.get("token")})}}function f(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(b){b.params.token&&(b.params.headers=Object.assign({},d({},a.header||"Authorization",b.params.token),b.params.headers))}}Object.defineProperty(c,"__esModule",{value:!0}),c.populateParams=e,c.populateHeader=f},{}],6:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=Object.assign({},k,a);return function(){var a=this;a.get("storage")||a.set("storage",(0,j.getStorage)(b.storage)),a.authenticate=function(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=this.get("storage"),e=Promise.resolve(c);
// If no type was given let's try to authenticate with a stored JWT
c.type||(e=(0,j.getJWT)(b.tokenKey,b.cookie,this.get("storage")).then(function(a){return a?{type:"token",token:a}:Promise.reject(new g["default"].NotAuthenticated("Could not find stored JWT and no authentication type was given"))}));var f=function(c){return a.set("token",c.token),a.set("user",c.data),Promise.resolve(d.setItem(b.tokenKey,c.token)).then(function(){return c})};return e.then(function(c){var d=void 0;if("local"===c.type)d=b.localEndpoint;else{if("token"!==c.type)throw new Error("Unsupported authentication 'type': "+c.type);d=b.tokenEndpoint}return(0,j.connected)(a).then(function(b){
// TODO (EK): Handle OAuth logins
// If we are using a REST client
if(a.rest)return a.service(d).create(c).then(f);var e=a.io?"emit":"send";return(0,j.authenticateSocket)(c,b,e).then(f)})})},
// Set our logout method with the correct socket context
a.logout=function(){
// remove the token from localStorage
return a.set("user",null),a.set("token",null),(0,j.clearCookie)(b.cookie),Promise.resolve(a.get("storage").setItem(b.tokenKey,"")).then(function(){
// If using sockets de-authenticate the socket
if(a.io||a.primus){var b=a.io?"emit":"send",c=a.io?a.io:a.primus;return(0,j.logoutSocket)(c,b)}})},
// Set up hook that adds adds token and user to params so that
// it they can be accessed by client side hooks and services
a.mixins.push(function(a){if("function"!=typeof a.before||"function"!=typeof a.after)throw new Error("It looks like feathers-hooks isn't configured. It is required before running feathers-authentication.");a.before(i.populateParams(b))}),
// Set up hook that adds authorization header for REST provider
a.rest&&a.mixins.push(function(a){a.before(i.populateHeader(b))})}};var f=a("feathers-errors"),g=e(f),h=a("./hooks"),i=d(h),j=a("./utils"),k={cookie:"feathers-jwt",tokenKey:"feathers-jwt",localEndpoint:"/auth/local",tokenEndpoint:"/auth/token"};b.exports=c["default"]},{"./hooks":5,"./utils":7,"feathers-errors":12}],7:[function(a,b,c){"use strict";
// Returns a promise that resolves when the socket is connected
function d(a){return new Promise(function(b,c){if(a.rest)return b();var d=a.io||a.primus;if(!d)return c(new Error("It looks like no client connection has been configured."));
// If the socket is not connected yet we have to wait for the `connect` event
if(
// If one of those events happens before `connect` the promise will be rejected
// If it happens after, it will do nothing (since Promises can only resolve once)
d.once("disconnect",c),d.once("close",c),a.io&&!d.connected||a.primus&&3!==d.readyState){var e=a.primus?"open":"connect";d.once(e,function(){return b(d)})}else b(d)})}
// Returns a promise that authenticates a socket
function e(a,b,c){return new Promise(function(d,e){b.once("unauthorized",e),b.once("authenticated",d),b[c]("authenticate",a)})}
// Returns a promise that de-authenticates a socket
function f(a,b){return new Promise(function(c,d){a[b]("logout",function(a){a&&d(a),c()})})}
// Returns the value for a cookie
function g(a){if("undefined"!=typeof document){var b="; "+document.cookie,c=b.split("; "+a+"=");if(2===c.length)return c.pop().split(";").shift()}return null}
// Returns the value for a cookie
function h(a){return"undefined"!=typeof document&&(document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null}
// Tries the JWT from the given key either from a storage or the cookie
function i(a,b,c){return Promise.resolve(c.getItem(a)).then(function(a){var c=g(b);return c?c:a})}
// Returns a storage implementation
function j(a){return a?a:{store:{},getItem:function(a){return this.store[a]},setItem:function(a,b){return this.store[a]=b}}}Object.defineProperty(c,"__esModule",{value:!0}),c.connected=d,c.authenticateSocket=e,c.logoutSocket=f,c.getCookie=g,c.clearCookie=h,c.getJWT=i,c.getStorage=j},{}],8:[function(a,b,c){"use strict";function d(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function e(a,b){return k[a](b)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=c.noop=function(){},g=function(a){var b=a[a.length-1];return"function"==typeof b?b:f},h=function(a,b){return"object"===d(a[b])?a[b]:{}},i=function(a){return function(b){var c=b[0],e=b[1],f=g(b),i=h(b,2);if("function"==typeof c)throw new Error("First parameter for '"+a+"' can not be a function");if("object"!==("undefined"==typeof e?"undefined":d(e)))throw new Error("No data provided for '"+a+"'");if(b.length>4)throw new Error("Too many arguments for '"+a+"' service method");return[c,e,i,f]}},j=function(a){return function(b){var c=b[0],d=h(b,1),e=g(b);if(b.length>3)throw new Error("Too many arguments for '"+a+"' service method");if("function"==typeof c)throw new Error("First parameter for '"+a+"' can not be a function");return[c,d,e]}},k=c.converters={find:function(a){var b=g(a),c=h(a,0);if(a.length>2)throw new Error("Too many arguments for 'find' service method");return[c,b]},create:function(a){var b=a[0],c=h(a,1),e=g(a);if("object"!==("undefined"==typeof b?"undefined":d(b)))throw new Error("First parameter for 'create' must be an object");if(a.length>3)throw new Error("Too many arguments for 'create' service method");return[b,c,e]},update:i("update"),patch:i("patch"),get:j("get"),remove:j("remove")}},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./arguments"),f=d(e),g=a("./utils"),h=a("./hooks"),i=d(h);c["default"]={getArguments:f["default"],stripSlashes:g.stripSlashes,each:g.each,hooks:i["default"]},b.exports=c["default"]},{"./arguments":8,"./hooks":10,"./utils":11}],10:[function(a,b,c){"use strict";function d(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function e(a){return{id:a[0],params:a[1],callback:a[2]}}function f(a){return{id:a[0],data:a[1],params:a[2],callback:a[3]}}var g=a("./utils");c.converters={find:function(a){return{params:a[0],callback:a[1]}},create:function(a){return{data:a[0],params:a[1],callback:a[2]}},get:e,remove:e,update:f,patch:f},c.hookObject=function(a,b,d){var e=c.converters[a](d);return e.method=a,e.type=b,e},c.makeArguments=function(a){var b=[];return"undefined"!=typeof a.id&&b.push(a.id),a.data&&b.push(a.data),b.push(a.params||{}),b.push(a.callback),b},c.convertHookData=function(a){var b={};return Array.isArray(a)?b={all:a}:"object"!==("undefined"==typeof a?"undefined":d(a))?b={all:[a]}:(0,g.each)(a,function(a,c){b[c]=Array.isArray(a)?a:[a]}),b}},{"./utils":11}],11:[function(a,b,c){"use strict";function d(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function e(a){return a.replace(/^(\/*)|(\/*)$/g,"")}function f(a,b){a&&"function"==typeof a.forEach?a.forEach(b):"object"===("undefined"==typeof a?"undefined":d(a))&&Object.keys(a).forEach(function(c){return b(a[c],c)})}Object.defineProperty(c,"__esModule",{value:!0}),c.stripSlashes=e,c.each=f},{}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){function b(){var b=Reflect.construct(a,Array.from(arguments));return Object.setPrototypeOf(b,Object.getPrototypeOf(this)),b}return b.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("debug")("feathers-errors"),l=function(a){function b(a,c,f,g,j){d(this,b),a=a||"Error";var l=void 0,m=void 0,n=void 0;a instanceof Error?(m=a.message||"Error",a.errors&&(l=a.errors)):"object"===("undefined"==typeof a?"undefined":i(a))?(m=a.message||"Error",j=a):m=a,j&&(n=h({},j),n.errors&&(l=n.errors,delete n.errors));
// NOTE (EK): Babel doesn't support this so
// we have to pass in the class name manually.
// this.name = this.constructor.name;
var o=e(this,Object.getPrototypeOf(b).call(this,m));return o.type="FeathersError",o.name=c,o.message=m,o.code=f,o.className=g,o.data=n,o.errors=l||{},k(o.name+"("+o.code+"): "+o.message),o}
// NOTE (EK): A little hack to get around `message` not
// being included in the default toJSON call.
return f(b,a),j(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}]),b}(g(Error)),m=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"BadRequest",400,"bad-request",c))}return f(b,a),b}(l),n=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"NotAuthenticated",401,"not-authenticated",c))}return f(b,a),b}(l),o=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"PaymentError",402,"payment-error",c))}return f(b,a),b}(l),p=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"Forbidden",403,"forbidden",c))}return f(b,a),b}(l),q=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"NotFound",404,"not-found",c))}return f(b,a),b}(l),r=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"MethodNotAllowed",405,"method-not-allowed",c))}return f(b,a),b}(l),s=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"NotAcceptable",406,"not-acceptable",c))}return f(b,a),b}(l),t=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"Timeout",408,"timeout",c))}return f(b,a),b}(l),u=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"Conflict",409,"conflict",c))}return f(b,a),b}(l),v=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"Unprocessable",422,"unprocessable",c))}return f(b,a),b}(l),w=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"GeneralError",500,"general-error",c))}return f(b,a),b}(l),x=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"NotImplemented",501,"not-implemented",c))}return f(b,a),b}(l),y=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,"Unavailable",503,"unavailable",c))}return f(b,a),b}(l),z={FeathersError:l,BadRequest:m,NotAuthenticated:n,PaymentError:o,Forbidden:p,NotFound:q,MethodNotAllowed:r,NotAcceptable:s,Timeout:t,Conflict:u,Unprocessable:v,GeneralError:w,NotImplemented:x,Unavailable:y};c["default"]=h({types:z,errors:z},z),b.exports=c["default"]},{debug:1}],13:[function(a,b,c){"use strict";function d(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=function(a){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;a[h]=a[h].toLowerCase()}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},e="function"==typeof b[b.length-1]?b.pop():function(){return!0};return function(a){var b="before"===a.type?a.data:a.result,c=function(c){
// data.data if the find method is paginated
return b&&c&&("find"===a.method||Array.isArray(b)?(b.data||b).forEach(d):d(b)),a},f=e(a);return f&&"function"==typeof f.then?f.then(c):c(f)}}function e(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=function(a){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;a[h]=void 0,delete a[h]}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},e="function"==typeof b[b.length-1]?b.pop():function(a){return!!a.params.provider};return function(a){var b="before"===a.type?a.data:a.result,c=function(c){return b&&c&&(Array.isArray(b)?b.forEach(d):(d(b),b.data&&(Array.isArray(b.data)?b.data.forEach(d):d(b.data)))),a},f=e(a);return f&&"function"==typeof f.then?f.then(c):c(f)}}function f(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];var d=function(a){var c=!0,d=!1,e=void 0;try{for(var f,g=Object.keys(a)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;-1===b.indexOf(h)&&(a[h]=void 0,delete a[h])}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}},e="function"==typeof b[b.length-1]?b.pop():function(a){return!!a.params.provider};return function(a){var b="before"===a.type?a.data:a.result,c=function(c){
// data.data if the find method is paginated
return b&&c&&("find"===a.method||Array.isArray(b)?(b.data||b).forEach(d):d(b)),a},f=e(a);return f&&"function"==typeof f.then?f.then(c):c(f)}}function g(a){var b=arguments;if(!a)return function(a){throw new j.MethodNotAllowed("Calling '"+a.method+"' not allowed.")};if("function"==typeof a)return function(b){var c=a(b),d=function(a){if(!a)throw new j.MethodNotAllowed("Calling '"+b.method+"' not allowed.")};return c&&"function"==typeof c.then?c.then(d):void d(c)};var c,d,e,f=function(){for(c=b.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=b[e];var f=[a].concat(d);return{v:function(b){var c=b.params.provider;if("external"===a&&c||-1!==f.indexOf(c))throw new j.MethodNotAllowed("Provider '"+b.params.provider+"' can not call '"+b.method+"'")}}}();return"object"===("undefined"==typeof f?"undefined":i(f))?f.v:void 0}function h(a,b){if(b=Object.assign({},b),!b.service)throw new Error("You need to provide a service");var c=b.field||a;return function(d){function e(e){if(!e[c])return Promise.resolve(e);
// Find by the field value by default or a custom query
var f=e[c];
// If it's a mongoose model then
return"function"==typeof e.toObject?e=e.toObject(b):"function"==typeof e.toJSON&&(e=e.toJSON(b)),d.app.service(b.service).get(f,d.params).then(function(b){return b&&(e[a]=b),e})["catch"](function(){return e})}if("after"===d.type){var f=function(){var a="find"===d.method&&d.result.data,b=a?d.result.data:d.result;return Array.isArray(b)?{v:Promise.all(b.map(e)).then(function(b){return a?d.result.data=b:d.result=b,d})}:{v:e(d.result).then(function(a){return d.result=a,d})}}();if("object"===("undefined"==typeof f?"undefined":i(f)))return f.v}}}Object.defineProperty(c,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};c.lowerCase=d,c.remove=e,c.pluck=f,c.disable=g,c.populate=h;var j=a("feathers-errors").errors},{"feathers-errors":12}],14:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a){return"object"===("undefined"==typeof a?"undefined":h(a))&&"string"==typeof a.method&&("before"===a.type||"after"===a.type)}function f(a,b){var c=this,d=b,f=function(a){if(a){if(!e(a))throw new Error(d.type+" hook for '"+d.method+"' method returned invalid hook object");d=a}return d},g=Promise.resolve(d);
// Go through all hooks and chain them into our promise
return a.forEach(function(a){var b=a.bind(c);g=2===b.length?g.then(function(a){return new Promise(function(c,d){b(a,function(a,b){return a?d(a):c(b)})})}):g.then(b),g=g.then(f)}),g["catch"](function(a){
// Add the hook information to any errors
throw a.hook=d,a})}function g(a,b,c){var e="__"+b+"Hooks";
// Initialize properties where hook functions are stored
a[e]={},c.forEach(function(b){"function"==typeof a[b]&&(a[e][b]=[])}),
// mixin the method (.before or .after)
a.mixin(d({},b,function(a){var b=this,d=i.hooks.convertHookData(a);return c.forEach(function(a){if("function"==typeof b[a]){var c=b[e][a];d.all&&c.push.apply(c,d.all),d[a]&&c.push.apply(c,d[a])}}),this}))}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};c.isHookObject=e,c.processHooks=f,c.addHookMethod=g;var i=a("feathers-commons")},{"feathers-commons":9}],15:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){return"undefined"!=typeof a&&"function"==typeof a.then}function g(a){if("function"==typeof a.mixin){var b=this,c=b.methods,d=a.before,g=a.after,h={};(0,l.addHookMethod)(a,"before",c),(0,l.addHookMethod)(a,"after",c),c.forEach(function(c){"function"==typeof a[c]&&(h[c]=function(){
// A reference to the original method
var a=this._super.bind(this),d=i.hooks.hookObject(c,"before",arguments);
// Process all before hooks
return d.app=b,l.processHooks.call(this,this.__beforeHooks[c],d).then(function(b){return"undefined"!=typeof b.result?Promise.resolve(b):new Promise(function(c,d){var g=i.hooks.makeArguments(b),h=function(a,e){a?d(a):(b.result=e,c(b))};
// We replace the callback with resolving the promise
g.splice(g.length-1,1,h);var j=a.apply(void 0,e(g));f(j)&&j.then(function(a){return h(null,a)},h)})}).then(function(a){return Object.assign({},a,{type:"after"})}).then(l.processHooks.bind(this,this.__afterHooks[c])).then(function(a){return a.result})})}),a.mixin(h),
// Before hooks that were registered in the service
d&&a.before(d),
// After hooks that were registered in the service
g&&a.after(g)}}function h(){return function(){this.mixins.unshift(g)}}Object.defineProperty(c,"__esModule",{value:!0});var i=a("feathers-commons"),j=a("./bundled"),k=d(j),l=a("./commons");h.lowerCase=k.lowerCase,h.remove=k.remove,h.pluck=k.pluck,h.disable=k.disable,h.populate=k.populate,c["default"]=h,b.exports=c["default"]},{"./bundled":13,"./commons":14,"feathers-commons":9}],16:[function(a,b,c){b.exports=a("./lib/client")},{"./lib/client":17}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){if(!a)throw new Error("Primus connection needs to be provided");var b=function(b){return new f["default"]({name:b,connection:a,method:"send"})},c=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.primus=a,this.defaultService=b};return c.Service=f["default"],c.service=b,c};var e=a("feathers-socket-commons/client"),f=d(e);b.exports=c["default"]},{"feathers-socket-commons/client":29}],18:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./lib/client":21,dup:16}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("qs"),i=d(h),j=a("feathers-commons"),k=function(){function a(b){e(this,a),this.name=(0,j.stripSlashes)(b.name),this.options=b.options,this.connection=b.connection,this.base=b.base+"/"+this.name}return g(a,[{key:"makeUrl",value:function(a,b){a=a||{};var c=this.base;if("undefined"!=typeof b&&(c+="/"+b),0!==Object.keys(a).length){var d=i["default"].stringify(a);c+="?"+d}return c}},{key:"find",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.request({url:this.makeUrl(a.query),method:"GET",headers:f({},a.headers)})}},{key:"get",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.request({url:this.makeUrl(b.query,a),method:"GET",headers:f({},b.headers)})}},{key:"create",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.request({url:this.makeUrl(b.query),body:a,method:"POST",headers:f({"Content-Type":"application/json"},b.headers)})}},{key:"update",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.request({url:this.makeUrl(c.query,a),body:b,method:"PUT",headers:f({"Content-Type":"application/json"},c.headers)})}},{key:"patch",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.request({url:this.makeUrl(c.query,a),body:b,method:"PATCH",headers:f({"Content-Type":"application/json"},c.headers)})}},{key:"remove",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.request({url:this.makeUrl(b.query,a),method:"DELETE",headers:f({},b.headers)})}}]),a}();c["default"]=k,b.exports=c["default"]},{"feathers-commons":9,qs:25}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./base"),k=d(j),l=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),i(b,[{key:"request",value:function(a){var b=this,c=h({},a);return a.body&&(c.body=JSON.stringify(a.body)),new Promise(function(d,e){b.connection(a.url,c).then(b.checkStatus).then(b.parseJSON).then(d)["catch"](e)})}},{key:"checkStatus",value:function(a){if(a.ok)return a;var b=new Error(a.statusText);throw b.code=a.status,b.response=a,b}},{key:"parseJSON",value:function(a){return a.json()}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./base":19}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0],b={};return Object.keys(m).forEach(function(c){var d=m[c];b[c]=function(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!b)throw new Error(c+" has to be provided to feathers-rest");var f=function(c){return new d({base:a,name:c,connection:b,options:e})},g=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=b,this.defaultService=f};return g.Service=d,g.service=f,g}}),b};var e=a("./jquery"),f=d(e),g=a("./superagent"),h=d(g),i=a("./request"),j=d(i),k=a("./fetch"),l=d(k),m={jquery:f["default"],superagent:h["default"],request:j["default"],fetch:l["default"]};b.exports=c["default"]},{"./fetch":20,"./jquery":22,"./request":23,"./superagent":24}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./base"),k=d(j),l=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),i(b,[{key:"request",value:function(a){var b=this,c=h({dataType:a.type||"json"},a);return a.body&&(c.data=JSON.stringify(a.body),c.contentType="application/json"),delete c.type,delete c.body,new Promise(function(a,d){b.connection.ajax(c).then(a,function(a){var b=new Error(a.responseText);b.xhr=a,d(b)})})}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./base":19}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./base"),k=d(j),l=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),i(b,[{key:"request",value:function(a){var b=this;return new Promise(function(c,d){b.connection(h({json:!0},a),function(a,b,e){return a?d(a):!a&&b.statusCode>=400?d("string"==typeof e?new Error(e):h(new Error(e.message),e)):void c(e)})})}}]),b}(k["default"]);c["default"]=l,b.exports=c["default"]},{"./base":19}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./base"),j=d(i),k=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"request",value:function(a){var b=this.connection(a.method,a.url).type(a.type||"json");return new Promise(function(c,d){b.set(a.headers),a.body&&b.send(a.body),b.end(function(a,b){return a?d(a):void c(b&&b.body)})})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./base":19}],25:[function(a,b,c){"use strict";var d=a("./stringify"),e=a("./parse");b.exports={stringify:d,parse:e}},{"./parse":26,"./stringify":27}],26:[function(a,b,c){"use strict";var d=a("./utils"),e={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1};e.parseValues=function(a,b){for(var c={},e=a.split(b.delimiter,b.parameterLimit===1/0?void 0:b.parameterLimit),f=0;f<e.length;++f){var g=e[f],h=-1===g.indexOf("]=")?g.indexOf("="):g.indexOf("]=")+1;if(-1===h)c[d.decode(g)]="",b.strictNullHandling&&(c[d.decode(g)]=null);else{var i=d.decode(g.slice(0,h)),j=d.decode(g.slice(h+1));Object.prototype.hasOwnProperty.call(c,i)?c[i]=[].concat(c[i]).concat(j):c[i]=j}}return c},e.parseObject=function(a,b,c){if(!a.length)return b;var d,f=a.shift();if("[]"===f)d=[],d=d.concat(e.parseObject(a,b,c));else{d=c.plainObjects?Object.create(null):{};var g="["===f[0]&&"]"===f[f.length-1]?f.slice(1,f.length-1):f,h=parseInt(g,10);!isNaN(h)&&f!==g&&String(h)===g&&h>=0&&c.parseArrays&&h<=c.arrayLimit?(d=[],d[h]=e.parseObject(a,b,c)):d[g]=e.parseObject(a,b,c)}return d},e.parseKeys=function(a,b,c){if(a){
// Transform dot notation to bracket notation
var d=c.allowDots?a.replace(/\.([^\.\[]+)/g,"[$1]"):a,f=/^([^\[\]]*)/,g=/(\[[^\[\]]*\])/g,h=f.exec(d),i=[];if(h[1]){
// If we aren't using plain objects, optionally prefix keys
// that would overwrite object prototype properties
if(!c.plainObjects&&Object.prototype.hasOwnProperty(h[1])&&!c.allowPrototypes)return;i.push(h[1])}for(
// Loop through children appending to the array until we hit depth
var j=0;null!==(h=g.exec(d))&&j<c.depth;)j+=1,(c.plainObjects||!Object.prototype.hasOwnProperty(h[1].replace(/\[|\]/g,""))||c.allowPrototypes)&&i.push(h[1]);
// If there's a remainder, just add whatever is left
return h&&i.push("["+d.slice(h.index)+"]"),e.parseObject(i,b,c)}},b.exports=function(a,b){var c=b||{};if(c.delimiter="string"==typeof c.delimiter||d.isRegExp(c.delimiter)?c.delimiter:e.delimiter,c.depth="number"==typeof c.depth?c.depth:e.depth,c.arrayLimit="number"==typeof c.arrayLimit?c.arrayLimit:e.arrayLimit,c.parseArrays=c.parseArrays!==!1,c.allowDots="boolean"==typeof c.allowDots?c.allowDots:e.allowDots,c.plainObjects="boolean"==typeof c.plainObjects?c.plainObjects:e.plainObjects,c.allowPrototypes="boolean"==typeof c.allowPrototypes?c.allowPrototypes:e.allowPrototypes,c.parameterLimit="number"==typeof c.parameterLimit?c.parameterLimit:e.parameterLimit,c.strictNullHandling="boolean"==typeof c.strictNullHandling?c.strictNullHandling:e.strictNullHandling,""===a||null===a||"undefined"==typeof a)return c.plainObjects?Object.create(null):{};for(var f="string"==typeof a?e.parseValues(a,c):a,g=c.plainObjects?Object.create(null):{},h=Object.keys(f),i=0;i<h.length;++i){var j=h[i],k=e.parseKeys(j,f[j],c);g=d.merge(g,k,c)}return d.compact(g)}},{"./utils":28}],27:[function(a,b,c){"use strict";var d=a("./utils"),e={delimiter:"&",arrayPrefixGenerators:{brackets:function(a){return a+"[]"},indices:function(a,b){return a+"["+b+"]"},repeat:function(a){return a}},strictNullHandling:!1,skipNulls:!1,encode:!0};e.stringify=function(a,b,c,f,g,h,i,j,k){var l=a;if("function"==typeof i)l=i(b,l);else if(d.isBuffer(l))l=String(l);else if(l instanceof Date)l=l.toISOString();else if(null===l){if(f)return h?d.encode(b):b;l=""}if("string"==typeof l||"number"==typeof l||"boolean"==typeof l)return h?[d.encode(b)+"="+d.encode(l)]:[b+"="+l];var m=[];if("undefined"==typeof l)return m;var n;if(Array.isArray(i))n=i;else{var o=Object.keys(l);n=j?o.sort(j):o}for(var p=0;p<n.length;++p){var q=n[p];g&&null===l[q]||(m=Array.isArray(l)?m.concat(e.stringify(l[q],c(b,q),c,f,g,h,i,j,k)):m.concat(e.stringify(l[q],b+(k?"."+q:"["+q+"]"),c,f,g,h,i,j,k)))}return m},b.exports=function(a,b){var c,d,f=a,g=b||{},h="undefined"==typeof g.delimiter?e.delimiter:g.delimiter,i="boolean"==typeof g.strictNullHandling?g.strictNullHandling:e.strictNullHandling,j="boolean"==typeof g.skipNulls?g.skipNulls:e.skipNulls,k="boolean"==typeof g.encode?g.encode:e.encode,l="function"==typeof g.sort?g.sort:null,m="undefined"==typeof g.allowDots?!1:g.allowDots;"function"==typeof g.filter?(d=g.filter,f=d("",f)):Array.isArray(g.filter)&&(c=d=g.filter);var n=[];if("object"!=typeof f||null===f)return"";var o;o=g.arrayFormat in e.arrayPrefixGenerators?g.arrayFormat:"indices"in g?g.indices?"indices":"repeat":"indices";var p=e.arrayPrefixGenerators[o];c||(c=Object.keys(f)),l&&c.sort(l);for(var q=0;q<c.length;++q){var r=c[q];j&&null===f[r]||(n=n.concat(e.stringify(f[r],r,p,i,j,k,d,l,m)))}return n.join(h)}},{"./utils":28}],28:[function(a,b,c){"use strict";var d=function(){for(var a=new Array(256),b=0;256>b;++b)a[b]="%"+((16>b?"0":"")+b.toString(16)).toUpperCase();return a}();c.arrayToObject=function(a,b){for(var c=b.plainObjects?Object.create(null):{},d=0;d<a.length;++d)"undefined"!=typeof a[d]&&(c[d]=a[d]);return c},c.merge=function(a,b,d){if(!b)return a;if("object"!=typeof b){if(Array.isArray(a))a.push(b);else{if("object"!=typeof a)return[a,b];a[b]=!0}return a}if("object"!=typeof a)return[a].concat(b);var e=a;return Array.isArray(a)&&!Array.isArray(b)&&(e=c.arrayToObject(a,d)),Object.keys(b).reduce(function(a,e){var f=b[e];return Object.prototype.hasOwnProperty.call(a,e)?a[e]=c.merge(a[e],f,d):a[e]=f,a},e)},c.decode=function(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}},c.encode=function(a){
// This code was originally written by Brian White (mscdex) for the io.js core querystring library.
// It has been adapted here for stricter adherence to RFC 3986
if(0===a.length)return a;for(var b="string"==typeof a?a:String(a),c="",e=0;e<b.length;++e){var f=b.charCodeAt(e);45===f||46===f||95===f||126===f||f>=48&&57>=f||f>=65&&90>=f||f>=97&&122>=f?c+=b.charAt(e):128>f?c+=d[f]:2048>f?c+=d[192|f>>6]+d[128|63&f]:55296>f||f>=57344?c+=d[224|f>>12]+d[128|f>>6&63]+d[128|63&f]:(e+=1,f=65536+((1023&f)<<10|1023&b.charCodeAt(e)),c+=d[240|f>>18]+d[128|f>>12&63]+d[128|f>>6&63]+d[128|63&f])}return c},c.compact=function(a,b){if("object"!=typeof a||null===a)return a;var d=b||[],e=d.indexOf(a);if(-1!==e)return d[e];if(d.push(a),Array.isArray(a)){for(var f=[],g=0;g<a.length;++g)"undefined"!=typeof a[g]&&f.push(a[g]);return f}for(var h=Object.keys(a),i=0;i<h.length;++i){var j=h[i];a[j]=c.compact(a[j],d)}return a},c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},c.isBuffer=function(a){return null===a||"undefined"==typeof a?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))}},{}],29:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./lib/client":30,dup:16}],30:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./utils"),g=a("debug")("feathers-socket-commons:client"),h=function(){function a(b){d(this,a),this.events=f.events,this.path=b.name,this.connection=b.connection,this.method=b.method}return e(a,[{key:"emit",value:function(){var a;(a=this.connection)[this.method].apply(a,arguments)}},{key:"send",value:function(a){for(var b=this,c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];var f=null;return"function"==typeof d[d.length-1]&&(f=d.pop()),new Promise(function(c,e){var h;d.unshift(b.path+"::"+a),d.push(function(a,b){return f&&f(a,b),a?e(a):c(b)}),g("Sending socket."+b.method,d),(h=b.connection)[b.method].apply(h,d)})}},{key:"find",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.send("find",a.query||{})}},{key:"get",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.send("get",a,b.query||{})}},{key:"create",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.send("create",a,b.query||{})}},{key:"update",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.send("update",a,b,c.query||{})}},{key:"patch",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.send("patch",a,b,c.query||{})}},{key:"remove",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.send("remove",a,b.query||{})}}]),a}();c["default"]=h;var i=["on","once","off"];i.forEach(function(a){h.prototype[a]=function(b,c){return g("Calling emitter method "+a+" with event '"+this.path+" "+b+"'"),this.connection[a](this.path+" "+b,c),this}}),b.exports=c["default"]},{"./utils":31,debug:1}],31:[function(a,b,c){"use strict";function d(a){return g.hooks.convertHookData(a)}function e(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;c>e;e++)d[e-2]=arguments[e];return new Promise(function(c,e){a.apply(b,d.concat(function(a,b){return a?e(a):void c(b)}))})}function f(a){var b={};return Object.getOwnPropertyNames(a).forEach(function(c){return b[c]=a[c]}),b}Object.defineProperty(c,"__esModule",{value:!0}),c.events=c.eventMappings=void 0,c.convertFilterData=d,c.promisify=e,c.errorObject=f;var g=a("feathers-commons"),h=c.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};c.events=Object.keys(h).map(function(a){return h[a]})},{"feathers-commons":9}],32:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./lib/client":33,dup:16}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){if(!a)throw new Error("Socket.io connection needs to be provided");var b=function(b){return new f["default"]({name:b,connection:a,method:"emit"})},c=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.io=a,this.defaultService=b};return c.Service=f["default"],c.service=b,c};var e=a("feathers-socket-commons/client"),f=d(e);b.exports=c["default"]},{"feathers-socket-commons/client":29}],34:[function(a,b,c){b.exports=a("./lib/client/index")},{"./lib/client/index":37}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("debug"),f=d(e),g=a("feathers-commons"),h=a("uberproto"),i=d(h),j=a("./mixins/index"),k=d(j),l=(0,f["default"])("feathers:application"),m=["find","get","create","update","patch","remove"],n=i["default"].extend({create:null});c["default"]={init:function(){Object.assign(this,{methods:m,mixins:(0,k["default"])(),services:{},providers:[],_setup:!1})},service:function(a,b){var c=this,d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(a=(0,g.stripSlashes)(a),!b){var e=this.services[a];return"undefined"==typeof e&&"function"==typeof this.defaultService?this.service(a,this.defaultService(a),d):e}var f=n.extend(b);
// Add all the mixins
// Run the provider functions to register the service
// If we ran setup already, set this service up explicitly
return l("Registering new service at `"+a+"`"),this.mixins.forEach(function(a){return a.call(c,f)}),"function"==typeof f._setup&&f._setup(this,a),this.providers.forEach(function(b){return b.call(c,a,f,d)}),this._isSetup&&"function"==typeof f.setup&&(l("Setting up service for `"+a+"`"),f.setup(this,a)),this.services[a]=f},use:function(a){var b=void 0,c=Array.from(arguments).slice(1).reduce(function(a,c){if("function"==typeof c)a[b?"after":"before"].push(c);else{if(b)throw new Error("invalid arg passed to app.use");b=c}return a},{before:[],after:[]}),d=function(a){return a.some(function(a){return b&&"function"==typeof b[a]})};
// Check for service (any object with at least one service method)
// Check for service (any object with at least one service method)
// Any arguments left over are other middleware that we want to pass to the providers
return d(["handle","set"])||!d(this.methods)?this._super.apply(this,arguments):(this.service(a,b,{middleware:c}),this)},setup:function(){var a=this;
// Setup each service (pass the app so that they can look up other services etc.)
return Object.keys(this.services).forEach(function(b){var c=a.services[b];l("Setting up service for `"+b+"`"),"function"==typeof c.setup&&c.setup(a,b)}),this._isSetup=!0,this},
// Express 3.x configure is gone in 4.x but we'll keep a more basic version
// That just takes a function in order to keep Feathers plugin configuration easier.
// Environment specific configurations should be done as suggested in the 4.x migration guide:
// https://github.com/visionmedia/express/wiki/Migrating-from-3.x-to-4.x
configure:function(a){return a.call(this),this},listen:function(){var a=this._super.apply(this,arguments);return this.setup(a),l("Feathers application listening"),a}},b.exports=c["default"]},{"./mixins/index":40,debug:1,"feathers-commons":9,uberproto:47}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a={settings:{},get:function(a){return this.settings[a]},set:function(a,b){return this.settings[a]=b,this},disable:function(a){return this.settings[a]=!1,this},disabled:function(a){return!this.settings[a]},enable:function(a){return this.settings[a]=!0,this},enabled:function(a){return!!this.settings[a]},use:function(){throw new Error("Middleware functions can not be used in the Feathers client")},listen:function(){return{}}};return g["default"].mixin(e.EventEmitter.prototype,a),a};var e=a("events"),f=a("uberproto"),g=d(f);b.exports=c["default"]},{events:3,uberproto:47}],37:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return(0,g["default"])(i["default"].apply(void 0,arguments))}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("../feathers"),g=d(f),h=a("./express"),i=d(h);e.version=a("../../package.json").version,b.exports=c["default"]},{"../../package.json":43,"../feathers":38,"./express":36}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}/**
 * Create a Feathers application that extends Express.
 *
 * @return {Function}
 * @api public
 */
function e(a){return g["default"].mixin(i["default"],a),a.init(),a}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("uberproto"),g=d(f),h=a("./application"),i=d(h);b.exports=c["default"]},{"./application":35,uberproto:47}],39:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.charAt(0).toUpperCase()+a.substring(1)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b="function"==typeof a.on&&"function"==typeof a.emit,c=a._rubberDuck=g["default"].emitter(a);"function"!=typeof a.mixin||b||a.mixin(h.EventEmitter.prototype),a._serviceEvents=Array.isArray(a.events)?a.events.slice():[],
// Pass the Rubberduck error event through
// TODO deal with error events properly
c.on("error",function(b){a.emit("serviceError",b[0])}),Object.keys(k).forEach(function(b){var d=k[b],f=-1!==a._serviceEvents.indexOf(d);if("function"==typeof a[b]&&!f){
// The Rubberduck event name (e.g. afterCreate, afterUpdate or afterDestroy)
var g="after"+e(b);a._serviceEvents.push(d),
// Punch the given method
c.punch(b,-1),
// Pass the event and error event through
c.on(g,function(c,e){c[0]?a.emit("serviceError",c[0]):!function(){
// callback without error
var f=j(b,"after",e),g=Array.isArray(c[1])?c[1]:[c[1]];g.forEach(function(b){return a.emit(d,b,f)})}()})}})};var f=a("rubberduck"),g=d(f),h=a("events"),i=a("feathers-commons"),j=i.hooks.hookObject,k={create:"created",update:"updated",remove:"removed",patch:"patched"};b.exports=c["default"]},{events:3,"feathers-commons":9,rubberduck:45}],40:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var b=[a("./promise"),a("./event"),a("./normalizer")];
// Override push to make sure that normalize is always the last
return b.push=function(){var a=[this.length-1,0].concat(Array.from(arguments));return this.splice.apply(this,a),this.length},b},b.exports=c["default"]},{"./event":39,"./normalizer":41,"./promise":42}],41:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=this;"function"==typeof a.mixin&&!function(){var c={};b.methods.forEach(function(b){"function"==typeof a[b]&&(c[b]=function(){return this._super.apply(this,(0,d.getArguments)(b,arguments))})}),a.mixin(c)}()};var d=a("feathers-commons");b.exports=c["default"]},{"feathers-commons":9}],42:[function(a,b,c){"use strict";function d(a){return"undefined"!=typeof a&&"function"==typeof a.then}function e(){var a=this._super.apply(this,arguments),b=arguments[arguments.length-1];return"function"==typeof b&&d(a)&&a.then(function(a){return b(null,a)},function(a){return b(a)}),a}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=this;"function"==typeof a.mixin&&!function(){var c={};b.methods.forEach(function(b){"function"==typeof a[b]&&(c[b]=e)}),a.mixin(c)}()},b.exports=c["default"]},{}],43:[function(a,b,c){b.exports={_args:[["feathers@^2.0.0","/Users/daffl/Development/feathersjs/feathers-client"]],_from:"feathers@>=2.0.0 <3.0.0",_id:"feathers@2.0.0",_inCache:!0,_installable:!0,_location:"/feathers",_nodeVersion:"5.6.0",_npmOperationalInternal:{host:"packages-5-east.internal.npmjs.com",tmp:"tmp/feathers-2.0.0.tgz_1456123682541_0.35575417522341013"},_npmUser:{email:"daff@neyeon.de",name:"daffl"},_npmVersion:"3.6.0",_phantomChildren:{},_requested:{name:"feathers",raw:"feathers@^2.0.0",rawSpec:"^2.0.0",scope:null,spec:">=2.0.0 <3.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/feathers/-/feathers-2.0.0.tgz",_shasum:"0ff06df8fd72271c25e6d1b4117b9e7721cfe370",_shrinkwrap:null,_spec:"feathers@^2.0.0",_where:"/Users/daffl/Development/feathersjs/feathers-client",author:{email:"hello@feathersjs.com",name:"Feathers",url:"http://feathersjs.com"},browser:{"./lib/index":"./lib/client/index"},bugs:{url:"https://github.com/feathersjs/feathers/issues"},contributors:[{email:"e.kryski@gmail.com",name:"Eric Kryski",url:"http://erickryski.com"},{email:"daff@neyeon.de",name:"David Luecke",url:"http://neyeon.com"}],dependencies:{"babel-polyfill":"^6.3.14",debug:"^2.1.1",events:"^1.1.0",express:"^4.12.3","feathers-commons":"^0.7.0",rubberduck:"^1.0.0",uberproto:"^1.2.0"},description:"Build Better APIs, Faster than Ever.",devDependencies:{"babel-cli":"^6.3.17","babel-core":"^6.3.26","babel-plugin-add-module-exports":"^0.1.2","babel-preset-es2015":"^6.3.13","body-parser":"^1.13.2","feathers-client":"^0.5.1","feathers-rest":"^1.1.0","feathers-socketio":"^1.1.0",istanbul:"^0.4.0",jshint:"^2.6.3",mocha:"^2.2.0",nsp:"^2.2.0",q:"^1.0.1",request:"^2.x","socket.io-client":"^1.0.0"},directories:{lib:"lib"},dist:{shasum:"0ff06df8fd72271c25e6d1b4117b9e7721cfe370",tarball:"http://registry.npmjs.org/feathers/-/feathers-2.0.0.tgz"},engines:{node:">= 0.10.0",npm:">= 1.3.0"},gitHead:"5a05f04928c920761e00fb564a0cec6a65272359",homepage:"http://feathersjs.com",keywords:["feathers","REST","socket.io","realtime"],license:"MIT",main:"lib/index",maintainers:[{email:"e.kryski@gmail.com",name:"ekryski"},{email:"daff@neyeon.de",name:"daffl"}],name:"feathers",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/feathersjs/feathers.git"},scripts:{compile:"rm -rf lib/ && babel -d lib/ src/",coverage:"istanbul cover _mocha -- test/ --recursive",jshint:"jshint src/. test/. --config",mocha:"mocha test/ --compilers js:babel-core/register --recursive",prepublish:"npm run compile",publish:"git push origin && git push origin --tags","release:major":"npm version major && npm publish","release:minor":"npm version minor && npm publish","release:patch":"npm version patch && npm publish","release:prerelease":"npm version prerelease && npm publish --tag pegasus",test:"npm run compile && npm run jshint && npm run mocha && nsp check",watch:"babel --watch -d lib/ src/"},version:"2.0.0"}},{}],44:[function(a,b,c){/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */
function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */
function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */
function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}/**
 * Pluralization helper.
 */
function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}/**
 * Helpers.
 */
var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} options
 * @return {String|Number}
 * @api public
 */
b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],45:[function(require,module,exports){var events=require("events"),utils=require("./utils"),wrap=exports.wrap={/**
   * Wrap an anonymous or named function to notify an Emitter and
   * return the wrapper function.
   * @param {events.EventEmitter} emitter The emitter to notify
   * @param {Function} fn The function to wrap
   * @param {String} name The optional name
   */
fn:function(emitter,fn,strict,name,scope){var wrapped=function(){var a;utils.emitEvents(emitter,"before",name,[arguments,this,name]);try{a=fn.apply(scope||this,arguments)}catch(b){throw utils.emitEvents(emitter,"error",name,[b,arguments,this,name]),b}return utils.emitEvents(emitter,"after",name,[a,arguments,this,name]),a};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped},/**
   * Wrap an anonymous or named function that calls a callback asynchronously
   * to notify an Emitter and return the wrapper function.
   * @param {events.EventEmitter} emitter The emitter to notify
   * @param {Function} fn The function to wrap
   * @param {Integer} position The position of the callback in the arguments
   * array (defaults to 0). Set to -1 if the callback is the last argument.
   * @param {String} name The optional name
   */
async:function(emitter,fn,position,strict,name,scope){var wrapped=function(){var a=-1==position?arguments.length-1:position||0,b=arguments[a],c=this,d=arguments,e=function(){try{b.apply(b,arguments)}catch(a){throw utils.emitEvents(emitter,"error",name,[a,d,c,name]),a}var e=arguments[0]instanceof Error?"error":"after";utils.emitEvents(emitter,e,name,[arguments,d,c,name])};utils.emitEvents(emitter,"before",name,[d,this,name]),d[a]=e;try{return fn.apply(scope||this,d)}catch(f){throw utils.emitEvents(emitter,"error",name,[f,d,c,name]),f}};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped}},Emitter=exports.Emitter=function(a){this.obj=a};Emitter.prototype=Object.create(events.EventEmitter.prototype),/**
 * Punch a method with the given name, with
 * @param {String | Array} method The name of the method or a list of
 * method names.
 * @param {Integer} position The optional position of the asynchronous callback
 * in the arguments list.
 */
Emitter.prototype.punch=function(a,b,c){if(Array.isArray(a)){var d=this;a.forEach(function(a){d.punch(a,b,c)})}else{var e=this.obj[a];"function"==typeof e&&(this.obj[a]=b||0===b?wrap.async(this,e,b,c,a):wrap.fn(this,e,c,a))}return this},exports.emitter=function(a){return new Emitter(a)}},{"./utils":46,events:3}],46:[function(a,b,c){c.toBase26=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyz";a>25;){var d=a%26;b=c.charAt(d)+b,a=Math.floor(a/26)-1}return b=c.charAt(a)+b},c.makeFakeArgs=function(a){for(var b=[],d=0;a>d;d++)b.push(c.toBase26(d));return b.join(",")},c.addArgs=function(a,b){return a.replace(/function\s*\(\)/,"function("+c.makeFakeArgs(b)+")")},c.emitEvents=function(a,b,c,d){var e=c?c.replace(/^\w/,function(a){return a.toUpperCase()}):null;a.emit.apply(a,[b].concat(d)),e&&a.emit.apply(a,[b+e].concat(d))}},{}],47:[function(a,b,c){/* global define */
/**
 * A base object for ECMAScript 5 style prototypal inheritance.
 *
 * @see https://github.com/rauschma/proto-js/
 * @see http://ejohn.org/blog/simple-javascript-inheritance/
 * @see http://uxebu.com/blog/2011/02/23/object-based-inheritance-for-ecmascript-5/
 */
!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.Proto=d()}(this,function(){function a(a,b,c,d){return function(){var e=this._super;
// Add a new ._super() method that is the same method
// but either pointing to the prototype method
// or to the overwritten method
this._super="function"==typeof b?b:a[c];
// The method only need to be bound temporarily, so we
// remove it when we're done executing
var f=d.apply(this,arguments);return this._super=e,f}}function b(b,c){var d,e=c||this,f=/\b_super\b/,g=Object.getPrototypeOf(e)||e.prototype;
// Copy the properties over
for(var h in b)d=e[h],("function"==typeof b[h]&&"function"==typeof g[h]||"function"==typeof d&&"function"==typeof b[h])&&f.test(b[h])?e[h]=a(g,d,h,b[h]):e[h]=b[h];return e}function c(b,c){var d=c||this,e=/\b_super\b/,f=Object.getPrototypeOf(d)||d.prototype,g={},h=b,i=function(a){g[a]||(g[a]=Object.getOwnPropertyDescriptor(h,a))};
// Collect all property descriptors
do Object.getOwnPropertyNames(h).forEach(i);while((h=Object.getPrototypeOf(h))&&Object.getPrototypeOf(h));return Object.keys(g).forEach(function(b){var c=g[b];"function"==typeof c.value&&e.test(c.value)&&(c.value=a(f,d[b],b,c.value)),Object.defineProperty(d,b,c)}),d}return{/**
		 * Create a new object using Object.create. The arguments will be
		 * passed to the new instances init method or to a method name set in
		 * __init.
		 */
create:function(){var a=Object.create(this),b="string"==typeof a.__init?a.__init:"init";return"function"==typeof a[b]&&a[b].apply(a,arguments),a},/**
		 * Mixin a given set of properties
		 * @param prop The properties to mix in
		 * @param obj [optional] The object to add the mixin
		 */
mixin:"function"==typeof Object.defineProperty?c:b,/**
		 * Extend the current or a given object with the given property
		 * and return the extended object.
		 * @param prop The properties to extend with
		 * @param obj [optional] The object to extend from
		 * @returns The extended object
		 */
extend:function(a,b){return this.mixin(a,Object.create(b||this))},/**
		 * Return a callback function with this set to the current or a given context object.
		 * @param name Name of the method to proxy
		 * @param args... [optional] Arguments to use for partial application
		 */
proxy:function(a){var b=this[a],c=Array.prototype.slice.call(arguments,1);return c.unshift(this),b.bind.apply(b,c)}}})},{}],48:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("feathers/client"),f=d(e),g=a("feathers-hooks"),h=d(g),i=a("feathers-authentication/client"),j=d(i),k=a("feathers-socketio/client"),l=d(k),m=a("feathers-primus/client"),n=d(m),o=a("feathers-rest/client"),p=d(o);Object.assign(f["default"],{socketio:l["default"],primus:n["default"],rest:p["default"],hooks:h["default"],authentication:j["default"]}),c["default"]=f["default"],b.exports=c["default"]},{"feathers-authentication/client":4,"feathers-hooks":15,"feathers-primus/client":16,"feathers-rest/client":18,"feathers-socketio/client":32,"feathers/client":34}]},{},[48])(48)}),/**
 * ngFeathers
 *
 * @version 0.0.1
 * @author Maik Hummel <m@ikhummel.com>
 * @license MIT
 */
/*global
    angular, feathers, io */
angular.module("ngFeathers",[]).provider("$feathers",[function(){var a=null,b=!0,c=window.localStorage;return{setAuthStorage:function(a){c=a},useSocket:function(a){b=!!a},setEndpoint:function(b){a=b},$get:[function(){return this.app=feathers().configure(feathers.hooks()),b?(this.socket=io(a),this.app.configure(feathers.socketio(this.socket))):this.app.configure(feathers.rest(a).jquery(window.jQuery)),this.app.configure(feathers.authentication({storage:c})),this.app}]}}]);